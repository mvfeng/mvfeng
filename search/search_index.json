{"config":{"lang":["zh","en","ja"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"Text Only<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/","title":"bmc\u5e38\u7528ipmitool\u6307\u4ee4","text":"<ul> <li>\"bmc\"</li> <li>\"ipmitool\"</li> <li>\"\u4fee\u6539bmc\"</li> <li>\"\u4fee\u6539\u8d26\u53f7\"</li> <li>\"\u4fee\u6539\u5bc6\u7801\"</li> <li>\"\u4fee\u6539IP\"</li> </ul>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#bmcipmitool","title":"BMC\u5e38\u7528ipmitool\u6307\u4ee4","text":"<p><code>ipmitool</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u548c\u914d\u7f6e IPMI\uff08Intelligent Platform Management Interface\uff09\u8bbe\u5907\u7684\u547d\u4ee4\u884c\u5de5\u5177\u3002IPMI \u662f\u4e00\u79cd\u6807\u51c6\u63a5\u53e3\uff0c\u5141\u8bb8\u7528\u6237\u5728\u64cd\u4f5c\u7cfb\u7edf\u672a\u542f\u52a8\u6216\u7cfb\u7edf\u5173\u95ed\u7684\u60c5\u51b5\u4e0b\uff0c\u8fdc\u7a0b\u7ba1\u7406\u548c\u76d1\u63a7\u670d\u52a1\u5668\u786c\u4ef6\u3002BMC\uff08Baseboard Management Controller\uff09\u662f IPMI \u7684\u6838\u5fc3\u7ec4\u4ef6\uff0c\u8d1f\u8d23\u5904\u7406\u4e0e\u786c\u4ef6\u7ba1\u7406\u76f8\u5173\u7684\u4efb\u52a1\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528 <code>ipmitool</code> \u914d\u7f6e BMC \u7684\u4e00\u4e9b\u5e38\u89c1\u64cd\u4f5c\uff1a</p> <p>\u6ce8\u610f\uff1a\u4efb\u4f55\u7684bmc\u914d\u7f6e\u5b8c\uff0c\u90fd\u8981\u8bb0\u5f97\u51b7\u91cd\u542fbmc\uff0c\u672c\u6587\u7ed3\u5c3e: 9. BMC \u8fdb\u884c\u51b7\u91cd\u542f\u4f7f\u751f\u6548</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#1-ipmitool","title":"1. \u5b89\u88c5 <code>ipmitool</code>","text":"<p>\u5728\u5927\u591a\u6570 Linux \u53d1\u884c\u7248\u4e2d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5305\u7ba1\u7406\u5668\u5b89\u88c5 <code>ipmitool</code>\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#ubuntudebian","title":"\u5728 Ubuntu/Debian \u4e0a\uff1a","text":"Bash<pre><code>sudo apt-get update\nsudo apt-get install ipmitool\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#centosrhel","title":"\u5728 CentOS/RHEL \u4e0a\uff1a","text":"Bash<pre><code>sudo yum install ipmitool\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#2-bmc","title":"2. \u8fde\u63a5\u5230 BMC","text":"<p>\u5728\u4f7f\u7528 <code>ipmitool</code> \u4e4b\u524d\uff0c\u4f60\u9700\u8981\u786e\u4fdd\u7cfb\u7edf\u5df2\u7ecf\u52a0\u8f7d\u4e86 IPMI \u9a71\u52a8\u7a0b\u5e8f\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u9a71\u52a8\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u52a0\u8f7d\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#ipmi","title":"\u68c0\u67e5 IPMI \u9a71\u52a8\u662f\u5426\u52a0\u8f7d\uff1a","text":"Bash<pre><code>lsmod | grep ipmi\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u4e2d\u5305\u542b <code>ipmi_msghandler</code>\u3001<code>ipmi_devintf</code> \u548c <code>ipmi_si</code> \u7b49\u6a21\u5757\uff0c\u8bf4\u660e\u9a71\u52a8\u5df2\u7ecf\u52a0\u8f7d\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#bmc","title":"\u8fde\u63a5\u5230 BMC\uff1a","text":"Bash<pre><code>ipmitool -I open shell\n</code></pre> <p>\u5982\u679c\u4f60\u9700\u8981\u901a\u8fc7\u7f51\u7edc\u8fde\u63a5\u5230\u8fdc\u7a0b BMC\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> Bash<pre><code>ipmitool -I lanplus -H &lt;BMC_IP&gt; -U &lt;username&gt; -P &lt;password&gt; &lt;command&gt;\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#3-bmc","title":"3. \u914d\u7f6e BMC \u7f51\u7edc","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>ipmitool</code> \u914d\u7f6e BMC \u7684\u7f51\u7edc\u8bbe\u7f6e\uff0c\u4f8b\u5982 IP \u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u3001\u7f51\u5173\u7b49\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_1","title":"\u83b7\u53d6\u5f53\u524d\u7f51\u7edc\u914d\u7f6e\uff1a","text":"Bash<pre><code>ipmitool lan print 1\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#ip","title":"\u8bbe\u7f6e\u9759\u6001 IP \u5730\u5740\uff1a","text":"Bash<pre><code>ipmitool lan set 1 ipsrc static\nipmitool lan set 1 ipaddr &lt;IP_ADDRESS&gt;\nipmitool lan set 1 netmask &lt;NETMASK&gt;\nipmitool lan set 1 defgw ipaddr &lt;GATEWAY&gt;\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#ipdhcp","title":"\u8bbe\u7f6e \u52a8\u6001IP(DHCP)\uff1a","text":"Bash<pre><code>ipmitool lan set 1 ipsrc dhcp\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#4-bmc","title":"4. \u914d\u7f6e BMC \u7528\u6237","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>ipmitool</code> \u7ba1\u7406 BMC \u7528\u6237\uff0c\u5305\u62ec\u6dfb\u52a0\u3001\u5220\u9664\u548c\u4fee\u6539\u7528\u6237\u6743\u9650\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_2","title":"\u5217\u51fa\u6240\u6709\u7528\u6237\uff1a","text":"Bash<pre><code>ipmitool user list 1\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_3","title":"\u6dfb\u52a0\u65b0\u7528\u6237\uff1a","text":"Bash<pre><code>ipmitool user set name &lt;user_id&gt; &lt;username&gt;\nipmitool user set password &lt;user_id&gt; &lt;password&gt;\nipmitool user priv &lt;user_id&gt; &lt;privilege_level&gt; 1\nipmitool user enable &lt;user_id&gt;\n</code></pre> <p>\u5176\u4e2d\uff0c<code>&lt;user_id&gt;</code> \u662f\u7528\u6237 ID\uff08\u901a\u5e38\u4ece 2 \u5f00\u59cb\uff09\uff0c<code>&lt;privilege_level&gt;</code> \u662f\u6743\u9650\u7ea7\u522b\uff084 \u4e3a\u7ba1\u7406\u5458\u6743\u9650\uff09\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_4","title":"\u5220\u9664\u7528\u6237\uff1a","text":"Bash<pre><code>ipmitool user disable &lt;user_id&gt;\nipmitool user set name &lt;user_id&gt; \"\"\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#5-bmc","title":"5. \u914d\u7f6e BMC \u4e8b\u4ef6\u65e5\u5fd7","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>ipmitool</code> \u67e5\u770b\u548c\u7ba1\u7406 BMC \u7684\u4e8b\u4ef6\u65e5\u5fd7\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_5","title":"\u67e5\u770b\u4e8b\u4ef6\u65e5\u5fd7\uff1a","text":"Bash<pre><code>ipmitool sel list\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_6","title":"\u6e05\u9664\u4e8b\u4ef6\u65e5\u5fd7\uff1a","text":"Bash<pre><code>ipmitool sel clear\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#6-bmc","title":"6. \u914d\u7f6e BMC \u7535\u6e90\u7ba1\u7406","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>ipmitool</code> \u8fdc\u7a0b\u63a7\u5236\u670d\u52a1\u5668\u7684\u7535\u6e90\u72b6\u6001\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_7","title":"\u83b7\u53d6\u5f53\u524d\u7535\u6e90\u72b6\u6001\uff1a","text":"Bash<pre><code>ipmitool power status\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_8","title":"\u5173\u95ed\u670d\u52a1\u5668\uff1a","text":"Bash<pre><code>ipmitool power off\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_9","title":"\u91cd\u542f\u670d\u52a1\u5668\uff1a","text":"Bash<pre><code>ipmitool power reset\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_10","title":"\u5f00\u673a\u670d\u52a1\u5668\uff1a","text":"Bash<pre><code>ipmitool power on\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#7-bmc","title":"7. \u914d\u7f6e BMC \u65f6\u949f","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>ipmitool</code> \u914d\u7f6e BMC \u7684\u65f6\u949f\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#bmc_1","title":"\u8bbe\u7f6e BMC \u65f6\u949f\uff1a","text":"Bash<pre><code>ipmitool sel time set now\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#8-bmc","title":"8. \u914d\u7f6e BMC \u4f20\u611f\u5668","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>ipmitool</code> \u67e5\u770b\u548c\u7ba1\u7406 BMC \u7684\u4f20\u611f\u5668\u6570\u636e\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_11","title":"\u67e5\u770b\u6240\u6709\u4f20\u611f\u5668\u6570\u636e\uff1a","text":"Bash<pre><code>ipmitool sdr list\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_12","title":"\u67e5\u770b\u7279\u5b9a\u4f20\u611f\u5668\u6570\u636e\uff1a","text":"Bash<pre><code>ipmitool sdr get &lt;sensor_id&gt;\n</code></pre>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#9-bmc","title":"9. BMC \u8fdb\u884c\u51b7\u91cd\u542f\u4f7f\u751f\u6548","text":"<p>\u5728\u914d\u7f6e\u5b8c BMC\uff08Baseboard Management Controller\uff09\u7684 \u4e0a\u9762\u4efb\u4f55\u9879\u540e\uff0c\u901a\u5e38\u9700\u8981\u5bf9 BMC \u672c\u8eab\u8fdb\u884c\u51b7\u91cd\u542f\uff0c\u800c\u4e0d\u662f\u5bf9\u6574\u4e2a\u670d\u52a1\u5668\u8fdb\u884c\u51b7\u91cd\u542f\u3002\u8fd9\u662f\u56e0\u4e3a BMC \u7684\u914d\u7f6e\u66f4\u6539\u901a\u5e38\u53ea\u9700\u8981 BMC \u91cd\u65b0\u542f\u52a8\u5373\u53ef\u751f\u6548\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#bmc_2","title":"\u5bf9 BMC \u8fdb\u884c\u51b7\u91cd\u542f\u7684\u6b65\u9aa4","text":"<ol> <li>\u4f7f\u7528 IPMI \u5de5\u5177\u91cd\u542f BMC\uff1a</li> </ol> <p>Bash<pre><code>ipmitool mc reset cold\n</code></pre> \u8fd9\u6761\u547d\u4ee4\u4f1a\u53d1\u9001\u4e00\u4e2a\u51b7\u91cd\u542f\u547d\u4ee4\u7ed9 BMC\uff0c\u4f7f\u5176\u91cd\u65b0\u542f\u52a8\u3002 2. \u7b49\u5f85\u51e0\u79d2\u949f\uff0c\u786e\u4fdd BMC \u5b8c\u5168\u91cd\u542f\u3002</p>"},{"location":"linux/operation/bmc%E5%B8%B8%E7%94%A8ipmitool%E6%8C%87%E4%BB%A4/#_13","title":"\u9a8c\u8bc1\u914d\u7f6e","text":"<p>\u5728 BMC \u91cd\u542f\u540e\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u9a8c\u8bc1 BMC \u7684\u7f51\u7edc\u914d\u7f6e\u662f\u5426\u751f\u6548\uff1a</p> Bash<pre><code>ipmitool lan print 1\n</code></pre>"},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/","title":"Centos8\u5fd8\u8bb0\u5bc6\u7801\u5982\u4f55\u91cd\u7f6e","text":"<p>title: centos8\u5fd8\u8bb0\u5bc6\u7801\u5982\u4f55\u91cd\u7f6e date: 2024-11-20 description: centos8\u5fd8\u8bb0\u5bc6\u7801\u5982\u4f55\u91cd\u7f6e tags:</p> <ul> <li>\"centos8\"</li> <li>\"root\"</li> <li>\"\u5fd8\u8bb0\u5bc6\u7801\"</li> <li>\"\u627e\u56de\u5bc6\u7801\"</li> </ul>"},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/#1-e","title":"1 \u5f00\u673a\u754c\u9762\u6309e","text":""},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/#2-rorw-initsysrootbinbash","title":"2 \u4ec5\u5c06ro\u6539\u4e3arw init=/sysroot/bin/bash","text":""},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/#3-ctrlx","title":"3 \u540c\u65f6\u6309\u4f4fctrl+x\u952e\uff0c\u7cfb\u7edf\u8fdb\u5165\u4ee5\u4e0b\u754c\u9762","text":""},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/#4","title":"4 \u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\u5bc6\u7801","text":"Text Only<pre><code>/# chroot /sysroot/      /\u5207\u6362\u56de\u539f\u59cb\u7cfb\u7edf/\n/# LANG=en           /\u628a\u8bed\u8a00\u6539\u4e3a\u82f1\u6587/\n/# passwd            /\u8bbe\u7f6e\u65b0\u5bc6\u7801/\n/# touch /.autorelabel    /\u4f7f\u5bc6\u7801\u751f\u6548/\n</code></pre>"},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/#5-ctrldreboot","title":"5 \u540c\u65f6\u6309Ctrl+d\u952e\uff0c\u8fdb\u5165\u754c\u9762\uff0c\u8f93\u5165reboot","text":""},{"location":"linux/operation/centos8%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE/#6","title":"6 \u91cd\u542f\u540e\uff0c\u8f93\u5165\u65b0\u5bc6\u7801\u5373\u53ef\u6b63\u5e38\u767b\u5f55","text":""},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/","title":"iperf3\u76f8\u4e92\u6253\u6d41","text":"<ul> <li>\"iperf3\"</li> <li>\"\u6253\u6d41\"</li> <li>\"\u7f51\u7edc\"</li> </ul> <p>iperf3 \u662f\u4e00\u4e2a\u7528\u4e8e\u6d4b\u91cf\u7f51\u7edc\u5e26\u5bbd\u7684\u5de5\u5177\uff0c\u5e38\u7528\u4e8e\u5bf9\u6253\u6d41\u6d4b\u8bd5\uff08\u5373\u5728\u4e24\u53f0\u8bbe\u5907\u4e4b\u95f4\u8fdb\u884c\u7f51\u7edc\u6027\u80fd\u6d4b\u8bd5\uff09\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528 iperf3 \u8fdb\u884c\u5bf9\u6253\u6d41\u6d4b\u8bd5\u7684\u6b65\u9aa4\uff1a</p>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#1","title":"1. \u73af\u5883\u51c6\u5907","text":"<ul> <li>\u8bbe\u5907A\uff1a\u4f5c\u4e3a\u670d\u52a1\u5668\u7aef\uff08\u63a5\u6536\u7aef\uff09\u3002</li> <li>\u8bbe\u5907B\uff1a\u4f5c\u4e3a\u5ba2\u6237\u7aef\uff08\u53d1\u9001\u7aef\uff09\u3002</li> <li>\u4e24\u53f0\u8bbe\u5907\u9700\u8981\u5728\u540c\u4e00\u7f51\u7edc\u4e2d\uff0c\u5e76\u4e14\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u3002</li> </ul>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#2-iperf3","title":"2. \u5b89\u88c5 iperf3","text":"<p>\u5728\u4e24\u53f0\u8bbe\u5907\u4e0a\u90fd\u9700\u8981\u5b89\u88c5 iperf3\u3002\u5b89\u88c5\u65b9\u6cd5\u53d6\u51b3\u4e8e\u64cd\u4f5c\u7cfb\u7edf\uff1a</p>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#ubuntudebian","title":"\u5728 Ubuntu/Debian \u4e0a\uff1a","text":"Bash<pre><code>sudo apt-get update\nsudo apt-get install iperf3\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#centosrhel","title":"\u5728 CentOS/RHEL \u4e0a\uff1a","text":"Bash<pre><code>sudo yum install iperf3\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#macos","title":"\u5728 macOS \u4e0a\uff1a","text":"Bash<pre><code>brew install iperf3\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#3-iperf3","title":"3. \u542f\u52a8 iperf3 \u670d\u52a1\u5668","text":"<p>\u5728\u8bbe\u5907A\uff08\u670d\u52a1\u5668\u7aef\uff09\u4e0a\u542f\u52a8 iperf3 \u670d\u52a1\u5668\uff0c\u5e76\u6307\u5b9a\u76d1\u542c\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u3002</p> Bash<pre><code>iperf3 -s -B &lt;\u670d\u52a1\u5668IP\u5730\u5740&gt; -p &lt;\u7aef\u53e3\u53f7&gt;\n</code></pre> <p>\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u5907A\u7684IP\u5730\u5740\u662f <code>192.168.1.100</code>\uff0c\u5e76\u4e14\u4f60\u60f3\u76d1\u542c\u5728 <code>5202</code> \u7aef\u53e3\uff0c\u5219\u547d\u4ee4\u4e3a\uff1a</p> Bash<pre><code>iperf3 -s -B 192.168.1.100 -p 5202\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#4-iperf3","title":"4. \u542f\u52a8 iperf3 \u5ba2\u6237\u7aef","text":"<p>\u5728\u8bbe\u5907B\uff08\u5ba2\u6237\u7aef\uff09\u4e0a\u542f\u52a8 iperf3 \u5ba2\u6237\u7aef\uff0c\u5e76\u8fde\u63a5\u5230\u8bbe\u5907A\u7684\u670d\u52a1\u5668\uff0c\u6307\u5b9a\u670d\u52a1\u5668\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u3002</p> Bash<pre><code>iperf3 -c &lt;\u670d\u52a1\u5668IP\u5730\u5740&gt; -p &lt;\u7aef\u53e3\u53f7&gt;\n</code></pre> <p>\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u5907A\u7684IP\u5730\u5740\u662f <code>192.168.1.100</code>\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u76d1\u542c\u5728 <code>5202</code> \u7aef\u53e3\uff0c\u5219\u547d\u4ee4\u4e3a\uff1a</p> Bash<pre><code>iperf3 -c 192.168.1.100 -p 5202\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#5","title":"5. \u6d4b\u8bd5\u53c2\u6570","text":"<p>\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\u6d4b\u8bd5\u53c2\u6570\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u6d4b\u8bd5\u65f6\u95f4\uff1a\u9ed8\u8ba4\u6d4b\u8bd5\u65f6\u95f4\u4e3a10\u79d2\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>-t</code> \u53c2\u6570\u6307\u5b9a\u65f6\u95f4\uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002</li> </ul> Bash<pre><code>iperf3 -c 192.168.1.100 -p 5202 -t 60  # \u6d4b\u8bd560\u79d2\n</code></pre> <ul> <li>\u5e26\u5bbd\u9650\u5236\uff1a\u4f7f\u7528 <code>-b</code> \u53c2\u6570\u9650\u5236\u5e26\u5bbd\uff08\u5355\u4f4d\uff1a\u6bd4\u7279/\u79d2\uff09\u3002</li> </ul> Bash<pre><code>iperf3 -c 192.168.1.100 -p 5202 -b 100M  # \u9650\u5236\u5e26\u5bbd\u4e3a100Mbps\n</code></pre> <ul> <li>\u53cc\u5411\u6d4b\u8bd5\uff1a\u4f7f\u7528 <code>-d</code> \u53c2\u6570\u8fdb\u884c\u53cc\u5411\u6d4b\u8bd5\u3002</li> </ul> Bash<pre><code>iperf3 -c 192.168.1.100 -p 5202 -d\n</code></pre> <ul> <li>UDP \u6d4b\u8bd5\uff1a\u4f7f\u7528 <code>-u</code> \u53c2\u6570\u8fdb\u884cUDP\u6d4b\u8bd5\u3002</li> </ul> Bash<pre><code>iperf3 -c 192.168.1.100 -p 5202 -u\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#6","title":"6. \u7ed3\u679c\u5206\u6790","text":"<p>\u6d4b\u8bd5\u5b8c\u6210\u540e\uff0ciperf3 \u4f1a\u8f93\u51fa\u8be6\u7ec6\u7684\u6d4b\u8bd5\u7ed3\u679c\uff0c\u5305\u62ec\u5e26\u5bbd\u3001\u4e22\u5305\u7387\u3001\u5ef6\u8fdf\u7b49\u4fe1\u606f\u3002</p>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#7","title":"7. \u505c\u6b62\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u6309 <code>Ctrl+C</code> \u505c\u6b62 iperf3 \u670d\u52a1\u5668\u3002</p>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#8","title":"8. \u5176\u4ed6\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u9632\u706b\u5899\u8bbe\u7f6e\uff1a\u786e\u4fdd\u4e24\u53f0\u8bbe\u5907\u4e4b\u95f4\u7684\u9632\u706b\u5899\u5141\u8bb8\u6307\u5b9a\u7684\u7aef\u53e3\u901a\u4fe1\u3002</li> <li>\u7f51\u7edc\u73af\u5883\uff1a\u786e\u4fdd\u7f51\u7edc\u73af\u5883\u7a33\u5b9a\uff0c\u907f\u514d\u5176\u4ed6\u7f51\u7edc\u6d3b\u52a8\u5e72\u6270\u6d4b\u8bd5\u7ed3\u679c\u3002</li> </ul>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#_1","title":"\u793a\u4f8b","text":"<p>\u5047\u8bbe\u8bbe\u5907A\u7684IP\u5730\u5740\u662f <code>192.168.1.100</code>\uff0c\u8bbe\u5907B\u7684IP\u5730\u5740\u662f <code>192.168.1.101</code>\uff0c\u5e76\u4e14\u4f60\u60f3\u5728 <code>5202</code> \u7aef\u53e3\u8fdb\u884c\u6d4b\u8bd5\u3002</p>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#a","title":"\u5728\u8bbe\u5907A\u4e0a\u542f\u52a8\u670d\u52a1\u5668\uff1a","text":"Bash<pre><code>iperf3 -s -B 192.168.1.100 -p 5202\n</code></pre>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#b","title":"\u5728\u8bbe\u5907B\u4e0a\u542f\u52a8\u5ba2\u6237\u7aef\uff1a","text":"Bash<pre><code>iperf3 -c 192.168.1.100 -p 5202 -t 60\n</code></pre> <p>\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u4f60\u53ef\u4ee5\u5728\u4e24\u53f0\u8bbe\u5907\u4e4b\u95f4\u8fdb\u884c\u5bf9\u6253\u6d41\u6d4b\u8bd5\uff0c\u5e76\u81ea\u5b9a\u4e49IP\u5730\u5740\u548c\u7aef\u53e3\uff0c\u8bc4\u4f30\u7f51\u7edc\u6027\u80fd\u3002</p>"},{"location":"linux/operation/iperf3%E7%9B%B8%E4%BA%92%E6%89%93%E6%B5%81/#_2","title":"\u67e5\u770b\u7ed3\u679c","text":"Text Only<pre><code>[root@localhost ~]# iperf3 -s -B 192.168.1.170 -p 5202\n-----------------------------------------------------------\nServer listening on 5202 (test #1)\n-----------------------------------------------------------\nAccepted connection from 192.168.1.22, port 40372\n[  5] local 192.168.1.170 port 5202 connected to 192.168.1.22 port 40384\n[ ID] Interval           Transfer     Bitrate\n[  5]   0.00-1.00   sec   112 MBytes   941 Mbits/sec\n[  5]   1.00-2.00   sec   112 MBytes   942 Mbits/sec\n[  5]   2.00-3.00   sec   112 MBytes   942 Mbits/sec\n[  5]   3.00-4.00   sec   112 MBytes   942 Mbits/sec\n[  5]   4.00-5.00   sec   112 MBytes   941 Mbits/sec\n[  5]   5.00-6.00   sec   112 MBytes   942 Mbits/sec\n[  5]   6.00-7.00   sec   112 MBytes   942 Mbits/sec\n[  5]   7.00-8.00   sec   112 MBytes   942 Mbits/sec\n[  5]   8.00-9.00   sec   112 MBytes   942 Mbits/sec\n[  5]   9.00-10.00  sec   112 MBytes   941 Mbits/sec\n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bitrate\n[  5]   0.00-10.00  sec  1.10 GBytes   941 Mbits/sec                  receiver\n</code></pre> Text Only<pre><code>[root@localhost ~]# ethtool  enp135s0f1\nSettings for enp135s0f1:\n        Supported ports: [ TP ]\n        Supported link modes:   10baseT/Half 10baseT/Full\n                                100baseT/Half 100baseT/Full\n                                1000baseT/Full\n        Supported pause frame use: Symmetric\n        Supports auto-negotiation: Yes\n        Supported FEC modes: Not reported\n        Advertised link modes:  10baseT/Half 10baseT/Full\n                                100baseT/Half 100baseT/Full\n                                1000baseT/Full\n        Advertised pause frame use: Symmetric\n        Advertised auto-negotiation: Yes\n        Advertised FEC modes: Not reported\n        Speed: 1000Mb/s\n        Duplex: Full\n        Port: Twisted Pair\n        PHYAD: 1\n        Transceiver: internal\n        Auto-negotiation: on\n        MDI-X: off (auto)\n        Supports Wake-on: pumbg\n        Wake-on: g\n        Current message level: 0x00000007 (7)\n                               drv probe link\n        Link detected: yes\n</code></pre> <p>\u7ed3\u679c\u663e\u793a\uff1a\u6253\u6d41\u5e73\u5747\u901f\u7387941 Mbits/sec\u548c\u7f51\u5361Speed: 1000Mb/s\u76f8\u8fd1\uff0c\u7b26\u5408</p>"},{"location":"linux/operation/linux%E5%B8%B8%E7%94%A8%E6%BA%90/","title":"Linux\u5e38\u7528\u6e90","text":"Debian <p>\u5907\u4efd /etc/apt/sources.list\u6587\u4ef6 (\u9700\u8981\u4f7f\u7528sudo), \u7136\u540e\u5728/etc/apt/sources.list \u6dfb\u52a0\u4ee5\u4e0b\u6761\u76ee</p> \u963f\u91cc\u6e90\u6e05\u534e\u6e90 Markdown<pre><code>deb https://mirrors.aliyun.com/debian/ bullseye main non-free contrib\ndeb-src https://mirrors.aliyun.com/debian/ bullseye main non-free contrib\ndeb https://mirrors.aliyun.com/debian-security/ bullseye-security main\ndeb-src https://mirrors.aliyun.com/debian-security/ bullseye-security main\ndeb https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib\ndeb-src https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib\ndeb https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib\ndeb-src https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib\n</code></pre> Markdown<pre><code>1. Sed sagittis eleifend rutrum\n2. Donec vitae suscipit est\n3. Nulla tempor lobortis orci\n</code></pre>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/","title":"nmcli\u914d\u7f6eip","text":"<ul> <li>\"host\"</li> <li>\"nmcli\"</li> <li>\"\u4fee\u6539\u5bc6\u7801\"</li> <li>\"\u4fee\u6539IP\"</li> </ul> <p><code>nmcli</code> \u662f NetworkManager \u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u914d\u7f6e\u548c\u7ba1\u7406\u7f51\u7edc\u8fde\u63a5\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528 <code>nmcli</code> \u914d\u7f6e IP \u5730\u5740\u7684\u6b65\u9aa4\uff1a</p>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#1","title":"1. \u67e5\u770b\u5f53\u524d\u7f51\u7edc\u8fde\u63a5","text":"<p>\u9996\u5148\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u7684\u7f51\u7edc\u8fde\u63a5\uff1a</p> Bash<pre><code>nmcli connection show\n</code></pre> <p>\u8fd9\u5c06\u5217\u51fa\u6240\u6709\u5df2\u914d\u7f6e\u7684\u7f51\u7edc\u8fde\u63a5\u3002</p>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#2-ip","title":"2. \u914d\u7f6e\u9759\u6001 IP \u5730\u5740","text":"<p>\u5047\u8bbe\u4f60\u8981\u4e3a\u540d\u4e3a <code>eth0</code> \u7684\u4ee5\u592a\u7f51\u63a5\u53e3\u914d\u7f6e\u9759\u6001 IP \u5730\u5740\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> Bash<pre><code>nmcli connection modify eth0 ipv4.addresses 192.168.1.100/24\nnmcli connection modify eth0 ipv4.gateway 192.168.1.1\nnmcli connection modify eth0 ipv4.dns 8.8.8.8\nnmcli connection modify eth0 ipv4.method manual\n</code></pre> <p>\u89e3\u91ca\uff1a</p> <ul> <li><code>ipv4.addresses 192.168.1.100/24</code>\uff1a\u8bbe\u7f6e IP \u5730\u5740\u4e3a <code>192.168.1.100</code>\uff0c\u5b50\u7f51\u63a9\u7801\u4e3a <code>255.255.255.0</code>\uff08\u5373 <code>/24</code>\uff09\u3002</li> <li><code>ipv4.gateway 192.168.1.1</code>\uff1a\u8bbe\u7f6e\u7f51\u5173\u5730\u5740\u4e3a <code>192.168.1.1</code>\u3002</li> <li><code>ipv4.dns 8.8.8.8</code>\uff1a\u8bbe\u7f6e DNS \u670d\u52a1\u5668\u4e3a <code>8.8.8.8</code>\u3002</li> <li><code>ipv4.method manual</code>\uff1a\u8bbe\u7f6e\u4e3a\u9759\u6001 IP \u914d\u7f6e\u3002</li> </ul>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#3","title":"3. \u5e94\u7528\u914d\u7f6e","text":"<p>\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u4f60\u9700\u8981\u91cd\u65b0\u542f\u52a8\u7f51\u7edc\u8fde\u63a5\u4ee5\u5e94\u7528\u66f4\u6539\uff1a</p> Bash<pre><code>nmcli connection down eth0\nnmcli connection up eth0\n</code></pre>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#4","title":"4. \u9a8c\u8bc1\u914d\u7f6e","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5df2\u6b63\u786e\u914d\u7f6e\uff1a</p> Bash<pre><code>ip addr show eth0\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 <code>nmcli</code> \u67e5\u770b\uff1a</p> Bash<pre><code>nmcli device show eth0\n</code></pre>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#5-ip-dhcp","title":"5. \u914d\u7f6e\u52a8\u6001 IP \u5730\u5740\uff08DHCP\uff09","text":"<p>\u5982\u679c\u4f60\u5e0c\u671b\u4f7f\u7528 DHCP \u81ea\u52a8\u83b7\u53d6 IP \u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> Bash<pre><code>nmcli connection modify eth0 ipv4.method auto\n</code></pre> <p>\u7136\u540e\u91cd\u65b0\u542f\u52a8\u8fde\u63a5\uff1a</p> Bash<pre><code>nmcli connection down eth0\nnmcli connection up eth0\n</code></pre>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#6","title":"6. \u5220\u9664\u914d\u7f6e","text":"<p>\u5982\u679c\u4f60\u60f3\u5220\u9664\u67d0\u4e2a\u914d\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> Bash<pre><code>nmcli connection delete eth0\n</code></pre>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#_1","title":"\u603b\u7ed3","text":"<p>\u901a\u8fc7 <code>nmcli</code> \u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u65b9\u4fbf\u5730\u914d\u7f6e\u548c\u7ba1\u7406\u7f51\u7edc\u8fde\u63a5\u7684 IP \u5730\u5740\u3001\u7f51\u5173\u3001DNS \u7b49\u4fe1\u606f\u3002\u65e0\u8bba\u662f\u9759\u6001 IP \u8fd8\u662f\u52a8\u6001 IP\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u547d\u4ee4\u884c\u64cd\u4f5c\u6765\u5b8c\u6210\u3002</p>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#_2","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#1-ens3f1","title":"1. \u9519\u8bef\uff1a\u672a\u77e5\u7684\u8fde\u63a5 \"ens3f1\"","text":"<p>\u5728\u4f7f\u7528 nmcli \u547d\u4ee4\u65f6\uff0c\u5982\u679c\u51fa\u73b0\u201c\u672a\u77e5\u7684\u8fde\u63a5 'ens3f1'\u201d\u9519\u8bef\uff0c\u901a\u5e38\u662f\u56e0\u4e3a\u7cfb\u7edf\u4e2d\u6ca1\u6709\u540d\u4e3a ens3f1 \u7684\u7f51\u7edc\u8fde\u63a5\u914d\u7f6e\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6848\uff1a</p>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#1_1","title":"1. \u68c0\u67e5\u7f51\u7edc\u63a5\u53e3\u540d\u79f0","text":"<p>\u9996\u5148\uff0c\u786e\u8ba4\u4f60\u7684\u7f51\u7edc\u63a5\u53e3\u540d\u79f0\u662f\u5426\u6b63\u786e\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u6240\u6709\u53ef\u7528\u7684\u7f51\u7edc\u63a5\u53e3\uff1a</p> Bash<pre><code>nmcli device status\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 <code>ip</code> \u547d\u4ee4\uff1a</p> Bash<pre><code>ip link show\n</code></pre>"},{"location":"linux/operation/nmcli%E9%85%8D%E7%BD%AEip/#2","title":"2. \u521b\u5efa\u65b0\u7684\u8fde\u63a5\u914d\u7f6e","text":"<p>\u5982\u679c <code>ens3f1</code> \u662f\u4e00\u4e2a\u65b0\u7684\u7f51\u7edc\u63a5\u53e3\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u914d\u7f6e\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u914d\u7f6e\uff1a</p> Bash<pre><code>nmcli connection add type ethernet ifname ens3f1 con-name ens3f1\n</code></pre> <p>\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u518d\u6b21\u5c1d\u8bd5\u4fee\u6539 IP \u5730\u5740\uff1a</p> Bash<pre><code>nmcli connection modify ens3f1 ipv4.addresses 192.168.1.22/24\n</code></pre>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/","title":"18_SystemReset\u7cfb\u7edf\u590d\u4f4d","text":"<ul> <li>\"PCIe\"</li> <li>\"SystemReset\u7cfb\u7edf\u590d\u4f4d\"</li> <li>\"cold reset\"</li> <li>\"warm reset\"</li> <li>\"hot reset\"</li> <li>\"function\u2010level reset\"</li> </ul>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_1","title":"\u4ecb\u7ecd","text":""},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_2","title":"\u524d\u4e00\u7ae0","text":"<p>\u200b       \u63cf\u8ff0\u4e86PCIe\u51fd\u6570\u4ea7\u751f\u4e2d\u65ad\u7684\u4e0d\u540c\u65b9\u5f0f\u3002\u65e7\u7684PCI\u6a21\u578b\u4f7f\u7528\u5f15\u811a\uff0c\u4f46\u662f\u8fb9\u5e26\u4fe1\u53f7\u5728\u4e32\u884c\u6a21\u578b\u4e2d\u662f\u4e0d\u53d7\u6b22\u8fce\u7684\uff0c\u56e0\u6b64\u5fc5\u987b\u652f\u6301\u5e26\u5185MSI(\u6d88\u606f\u4fe1\u53f7\u4e2d\u65ad)\u673a\u5236\u3002\u7531\u4e8e\u8f6f\u4ef6\u5411\u540e\u517c\u5bb9\u7684\u539f\u56e0\uff0cPCI INTx\u5f15\u811a\u64cd\u4f5c\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528PCIe INTx\u6d88\u606f\u6765\u6a21\u62df\u3002\u63cf\u8ff0\u4e86PCI\u4f20\u7edfINTx#\u65b9\u6cd5\u548c\u65b0\u7248\u672c\u7684MSI/MSI\u2010X\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_3","title":"\u672c\u7ae0\u8282","text":"<p>\u200b       \u4ecb\u7ecdPCIe\u7684\u56db\u79cd\u590d\u4f4d\u7c7b\u578b: cold reset, warm reset, hot reset, and function\u2010level reset\u3002\u8ba8\u8bba\u4e86\u4f7f\u7528\u8fb9\u5e26\u590d\u4f4d\u4fe1\u53f7PERST#\u6765\u4ea7\u751fsystem reset\uff0c\u4ee5\u53ca\u4f7f\u7528\u5e26\u5185\u590d\u4f4d\u4fe1\u53f7TS1\u6765\u4ea7\u751fHot Reset\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_4","title":"\u4e0b\u4e00\u7ae0","text":"<p>\u200b       \u4e0b\u4e00\u7ae0\u63cf\u8ff0PCI Express\u70ed\u63d2\u62d4\u6a21\u578b\u3002\u8fd8\u4e3a\u652f\u6301\u70ed\u63d2\u62d4\u529f\u80fd\u7684\u6240\u6709\u8bbe\u5907\u548c\u5916\u5f62\u56e0\u7d20\u5b9a\u4e49\u4e86\u6807\u51c6\u4f7f\u7528\u6a21\u578b\u3002\u5bf9\u4e8e\u70ed\u63d2\u62d4\u5361\u6765\u8bf4\uff0c\u7535\u6e90\u4e5f\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53\u5728\u8fd0\u884c\u65f6\u5c06\u65b0\u5361\u6dfb\u52a0\u5230\u7cfb\u7edf\u4e2d\u65f6\uff0c\u786e\u4fdd\u5176\u7535\u6e90\u9700\u6c42\u4e0d\u8d85\u8fc7\u7cfb\u7edf\u6240\u80fd\u63d0\u4f9b\u7684\u7535\u91cf\u662f\u5f88\u91cd\u8981\u7684\u3002\u9700\u8981\u4e00\u79cd\u673a\u5236\u6765\u67e5\u8be2\u548c\u63a7\u5236\u8bbe\u5907\u7684\u529f\u7387\u9700\u6c42\uff0c\u529f\u7387\u9884\u7b97\u63d0\u4f9b\u4e86\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#system-reset","title":"\u4e24\u7c7bSystem Reset","text":"<p>\u200b       PCI Express\u89c4\u8303\u63cf\u8ff0\u4e86\u56db\u79cd\u7c7b\u578b\u7684\u590d\u4f4d\u673a\u5236\u3002\u5176\u4e2d\u4e09\u4e2a\u662fPCIe\u89c4\u8303\u65e9\u671f\u7248\u672c\u7684\u4e00\u90e8\u5206\uff0c\u73b0\u5728\u7edf\u79f0\u4e3a\u5e38\u89c4\u590d\u4f4d(Conventional Reset)\uff0c\u5176\u4e2d\u4e24\u4e2a\u79f0\u4e3a\u57fa\u672c\u590d\u4f4d(Function-Level Reset)\u3002</p> <p>\u968f\u77402.0\u89c4\u8303\u4fee\u8ba2\u800c\u589e\u52a0\u7684\u7b2c\u56db\u4e2a\u7c7b\u522b\u548c\u65b9\u6cd5\u88ab\u79f0\u4e3aFunction\u7ea7\u590d\u4f4d\u3002</p> <pre><code>graph TD;\n    A[PCIe Reset] --&gt; B[Conventional Reset];\n    A --&gt; C[Function-Level Reset];\n    B --&gt; D[Fundamental Reset];\n    B --&gt; E[Non-Fundamental Reset];\n    C --&gt; F[PFLR] --&gt; N[\u9488\u5bf9\u591aFunction\u8bbe\u5907 \u590d\u4f4d\u5355Function\u4e0d\u5f71\u54cd\u5176\u4ed6Function];\n    C --&gt; G[VFLR] --&gt; N[\u9488\u5bf9\u591aFunction\u8bbe\u5907 \u590d\u4f4d\u5355Function\u4e0d\u5f71\u54cd\u5176\u4ed6Function];\n    D --&gt; H[Cold Reset] --&gt; L[PERST#\u8d70\u7ba1\u811a\u89e6\u53d1\u590d\u4f4d]\n    D --&gt; I[Warm Reset] --&gt; L[PERST#\u8d70\u7ba1\u811a\u89e6\u53d1\u590d\u4f4d]\n    E --&gt; J[Hot Reset] --&gt; M[TS1/TS2\u8d70\u5e26\u5185 OS\u89e6\u53d1\u590d\u4f4d]\n    E --&gt; K[Link Disable] --&gt; M[TS1/TS2\u8d70\u5e26\u5185 OS\u89e6\u53d1\u590d\u4f4d]\n</code></pre> \u590d\u4f4d\u7c7b\u578b \u89e6\u53d1\u65b9\u5f0f Cold Reset \u8bbe\u5907\u7684\u4e3b\u7535\u6e90\u8fdb\u884c\u4e0a\u4e0b\u7535\u5c06\u89e6\u53d1\u51b7\u590d\u4f4d\u3002 Warm Reset \u65e0\u9700\u5173\u95ed\u4e3b\u7535\u6e90\uff0c\u66f4\u6539\u670d\u52a1\u5668\u7535\u6e90\u72b6\u6001\u5bc4\u5b58\u5668\u6765\u89e6\u53d1PERST#\u7ba1\u811a\u590d\u4f4d Hot Reset \u5c06RP/Switch\u7684Bridge Control Register bit[6]\uff0c\u5373Secondary Bus Reset bit\u7f6e1\u6765\u89e6\u53d1 Link Disable \u5c06device\u7684Link Control Register bit [4]\uff0c\u5373Link Disable bit\u7f6e1\u6765\u89e6\u53d1 FLR \u670d\u52a1\u5668\u52a0\u8f7d\u7684Function Driver\u4f1a\u914d\u7f6edevice\u5404\u4e2aPF Device Control Register bit[15]\uff0c\u89e6\u53d1PFLR\u590d\u4f4d <p>\u590d\u4f4d\u57df</p> <p>Fundamental Reset\uff1a</p> <p>\u200b   \u5f53Host\u4e0a\u4e0b\u7535\u65f6\u6216\u8005\u901a\u8fc7\u914d\u7f6eHost\u5185\u5bc4\u5b58\u5668\uff0c\u5b9e\u73b0assert PERST#\u7ba1\u811a\uff0c\u901a\u8fc7PERST#\u7ba1\u811a\u6765\u590d\u4f4d\u5bf9\u63a5\u7684Switch/Device\u3002</p> <p>\u200b   \u5f53Fundamental Reset\u6709\u6548\u65f6\uff0c\u5c06\u590d\u4f4d\u6574\u4e2a\u8bbe\u5907\uff0c\u91cd\u65b0\u521d\u59cb\u5316\u6bcf\u4e2a\u72b6\u6001\u673a\u548c\u6240\u6709\u786c\u4ef6\u903b\u8f91\uff0c\u7aef\u53e3\u72b6\u6001\u548c\u914d\u7f6e\u5bc4\u5b58\u5668\uff0c\u5176\u4e2d\u9700\u8981\u6ce8\u610f\uff1aSticky Reg\u7684\u590d\u4f4d\u884c\u4e3a\u548c\u8f85\u52a9\u7535\u6e90\u6709\u5173\uff1a</p> <ul> <li>\u5b58\u5728\u8f85\u52a9\u7535\u6e90\u65f6\uff0cSticky Reg\u4e0d\u590d\u4f4d\u3002</li> <li>\u4e0d\u5b58\u5728\u8f85\u52a9\u7535\u6e90\u65f6\uff0cSticky Reg\u662f\u5426\u590d\u4f4d\uff0cspec\u672a\u660e\u786e\u89c4\u5b9a\u3002</li> </ul> <p>PERST#\uff1a</p> <ol> <li>PERST#\u590d\u4f4d\u64a4\u79bb\u540e\uff0cLTSSM\u5fc5\u987b\u572820ms\u5185\u8fdb\u5165Detect\u72b6\u6001\uff1b</li> <li>PERST#\u590d\u4f4d\u64a4\u79bb\u540e\uff0c\u4e3b\u673a\u8f6f\u4ef6\u81f3\u5c11\u5728100ms\u4e4b\u540e\u624d\u80fd\u5f00\u59cb\u53d1\u9001Config Request\uff1b</li> <li>\u82e5\u4e3b\u673a\u8f6f\u4ef6\u5728\u7b49\u5f85100ms\u65f6\u76f4\u63a5\u5f00\u59cb\u53d1\u9001Config Request\uff0c\u4f46\u8bbe\u5907\u521d\u59cb\u5316\u6d41\u7a0b\u8fd8\u672a\u7ed3\u675f\uff0c\u8bbe\u5907\u4f1a\u56de\u590dCRS\u3002</li> <li>RC\u53ef\u4ee5\u9009\u62e9\u91cd\u65b0\u53d1\u9001Config Request\uff0c\u6216\u8005\u4e0a\u62a5\u7ed9CPU\u63d0\u793a\u8bbe\u5907\u5c1a\u672aready\u3002</li> <li>\u8bbe\u5907\u6700\u591a\u53ef\u4ee5\u57281s\u5185\u5b8c\u6210\u521d\u59cb\u5316\uff0c1s\u540e\u5fc5\u987b\u8981\u80fd\u6b63\u786e\u5904\u7406Config Request\uff0c\u5426\u5219RC\u8ba4\u4e3a\u8be5\u8bbe\u5907\u51fa\u9519\uff0c\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002</li> </ol>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-resetcoldreset-warmreset","title":"Fundamental Reset(ColdReset WarmReset)","text":"<p>\u200b       \u57fa\u672c\u590d\u4f4d(Fundamental Reset) \u5728\u786c\u4ef6\u4e2d\u5904\u7406\uff0c\u590d\u4f4d\u6574\u4e2a\u8bbe\u5907\uff0c\u91cd\u65b0\u521d\u59cb\u5316\u6bcf\u4e2a\u72b6\u6001\u673a\u548c\u6240\u6709\u786c\u4ef6\u903b\u8f91\uff0c\u7aef\u53e3\u72b6\u6001\u548c\u914d\u7f6e\u5bc4\u5b58\u5668\u3002\u8be5\u89c4\u5219\u7684\u4f8b\u5916\u662f\u4e00\u7ec4\u914d\u7f6e\u5bc4\u5b58\u5668\u5b57\u6bb5\uff0c\u5b83\u4eec\u88ab\u6807\u8bc6\u4e3a\u7c98\u6027(sticky)\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4fdd\u7559\u5176\u5185\u5bb9\uff0c\u9664\u975e\u6240\u6709\u7535\u6e90\u88ab\u79fb\u9664\u3002\u8fd9\u4f7f\u5f97\u5b83\u4eec\u5bf9\u4e8e\u5b9a\u4f4d\u9700\u8981\u590d\u4f4d\u624d\u80fd\u4f7fLink\u518d\u6b21\u5de5\u4f5c\u7684\u95ee\u9898\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u8be5\u9519\u8bef\u72b6\u6001\u53ef\u4ee5\u5728\u590d\u4f4d\u540e\u4ecd\u7136\u5b58\u5728\uff0c\u5e76\u4e14\u4e4b\u540e\u53ef\u7528\u4e8e\u8f6f\u4ef6\u3002\u5982\u679c\u4e3b\u7535\u6e90\u88ab\u79fb\u9664\uff0c\u4f46Vaux\u53ef\u7528\uff0c\u8fd9\u4e5f\u5c06\u4fdd\u6301sticky bits\uff0c\u4f46\u5982\u679c\u4e3b\u7535\u6e90\u548cVaux\u90fd\u4e22\u5931\uff0csticky bits\u5c06\u4e0e\u5176\u4ed6\u4e00\u5207\u4e00\u8d77\u91cd\u7f6e\u3002</p> <p>\u200b       \u57fa\u672c\u590d\u4f4d\u5c06\u53d1\u751f\u5728\u7cfb\u7edf\u8303\u56f4\u5185\u7684\u590d\u4f4d\uff0c\u4f46\u5b83\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5355\u4e2a\u8bbe\u5907\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-reset","title":"\u4e24\u79cd\u7c7b\u578b\u7684\u57fa\u672c\u590d\u4f4d(Fundamental Reset)\u5b9a\u4e49\u5982\u4e0b:","text":"<ul> <li> <p>\u51b7\u590d\u4f4d(Cold Reset): \u8bbe\u5907\u7684\u4e3b\u7535\u6e90\u8fdb\u884c\u4e0a\u4e0b\u7535\u5c06\u89e6\u53d1\u51b7\u590d\u4f4d\u3002</p> </li> <li> <p>\u6696\u590d\u4f4d(Warm Reset)[\u53ef\u9009]:\u65e0\u9700\u5173\u95ed\u4e3b\u7535\u6e90\uff0c\u7531\u7cfb\u7edf\u7279\u5b9a\u7684\u65b9\u5f0f\u89e6\u53d1\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u66f4\u6539\u7cfb\u7edf\u7535\u6e90\u72b6\u6001\u5bc4\u5b58\u5668\u6765\u89e6\u53d1PERST#\u7ba1\u811a\u590d\u4f4d\u3002Warm Reset\u7684\u673a\u5236\u6ca1\u6709\u5728\u89c4\u8303\u4e2d\u5b9a\u4e49\uff0c\u6240\u4ee5\u7cfb\u7edf\u8bbe\u8ba1\u5e08\u5c06\u9009\u62e9\u5982\u4f55\u5b8c\u6210\u3002</p> </li> </ul>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-reset_1","title":"\u5f53\u57fa\u672c\u590d\u4f4d(Fundamental Reset) \u53d1\u751f\u65f6\uff1a","text":"<ul> <li>\u5bf9\u4e8e\u6b63\u7535\u538b\uff0c\u63a5\u6536\u5668\u7ec8\u7aef\u9700\u8981\u6ee1\u8db3ZRX\u2010HIGH\u2010IMP\u2010DC\u2010POS\u53c2\u6570\u3002\u57282.5 GT/s\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e00\u901f\u5ea6\u4e0d\u5c0f\u4e8e10 K\u03a9 /s\u3002\u5728\u8f83\u9ad8\u7684\u901f\u5ea6\u4e0b\uff0c\u5b83\u5fc5\u987b\u4e0d\u5c0f\u4e8e10k\u03a9 \u7535\u538b\u4f4e\u4e8e200mv\u4e0b, 20k\u03a9\u7535\u538b\u9ad8\u4e8e200mv\u3002These are the values when the termi\u2010 nations are not powered.</li> <li>\u7c7b\u4f3c\u5730\uff0c\u5bf9\u4e8e\u8d1f\u7535\u538b\uff0cZRX\u2010HIGH\u2010IMP\u2010DC\u2010NEG\u53c2\u6570\uff0c\u5728\u6bcf\u79cd\u60c5\u51b5\u4e0b\uff0c\u5176\u503c\u6700\u5c0f\u4e3a1k\u03a9\u3002</li> <li>\u5bf9\u4e8eGen1\u53d1\u5c04\u673a\u7ec8\u7aef\u9700\u8981\u6ee1\u8db3\u8f93\u51fa\u963b\u6297ZTX - DIFF - DC\u4ece80\u5230120\u03a9\u548c\u5bf9\u4e8eGen2\u548cGen3\u6700\u5927\u503c120\u03a9\uff0c\u4f46\u53ef\u80fd\u4f1a\u4f7f\u9a71\u52a8\u5668\u5904\u4e8e\u9ad8\u963b\u6297\u72b6\u6001\u3002</li> <li>\u53d1\u5c04\u673a\u7ec8\u7aef\u4fdd\u6301\u76f4\u6d41DC\u5171\u6a21\u7535\u538b\u57280\u52303.6V\u4e4b\u95f4\u3002</li> </ul>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-reset_2","title":"\u5f53\u57fa\u672c\u590d\u4f4d(Fundamental Reset) \u9000\u51fa\u65f6\uff1a","text":"<ul> <li>\u5f53\u542f\u7528\u63a5\u6536\u5668\u7ec8\u6b62\u65f6\uff0c\u63a5\u6536\u5668\u5355\u7aef\u7ec8\u6b62\u5fc5\u987b\u5b58\u5728\uff0c\u4ee5\u4fbf\u63a5\u6536\u5668\u68c0\u6d4b\u6b63\u5e38\u5de5\u4f5c\uff08\u5bf9\u4e8eGen1\u548cGen2\u4e3a40\u201060\u03a9\uff0c\u5bf9\u4e8eGen3\u4e3a50\u03a9+/-20%\uff09\u3002\u8f93\u5165\u201cDetect\u201d\u65f6\uff0c\u5171\u6a21\u963b\u6297\u5fc5\u987b\u572850\u03a9+/-20%\u7684\u9002\u5f53\u8303\u56f4\u5185\u3002</li> <li>\u5fc5\u987b\u91cd\u65b0\u542f\u7528100\u03a9\u7684\u63a5\u6536\u5668\u7ec8\u6b62ZRX - DIFF - DC\uff0c\u4f7f\u5176\u5728\u8bad\u7ec3\u671f\u95f4\u88ab\u76f8\u90bb\u7684\u53d1\u5c04\u5668\u68c0\u6d4b\u5230\u3002</li> <li>\u53d1\u5c04\u673a\u7ec8\u7aef\u4fdd\u6301\u76f4\u6d41DC\u5171\u6a21\u7535\u538b\u57280\u52303.6V\u4e4b\u95f4\u3002</li> </ul> <p>\u5b9a\u4e49\u4e86\u4f20\u9012\u57fa\u672c\u590d\u4f4d\u7684\u4e24\u79cd\u65b9\u6cd5\u3002\u9996\u5148\uff0c\u5b83\u53ef\u4ee5\u7528\u4e00\u4e2a\u79f0\u4e3aPERST# \uff08PCI Express Reset\uff09\u7684\u8f85\u52a9\u8fb9\u5e26\u4fe1\u53f7auxiliary side-band signal\u8fdb\u884c\u4fe1\u53f7\u3002 \u5176\u6b21\uff0c\u5f53\u6ca1\u6709\u4e3a\u63d2\u4ef6\u5361\u6216\u7ec4\u4ef6\u63d0\u4f9bPERST#\u65f6\uff0c\u5f53\u7535\u6e90\u5faa\u73af\u65f6\uff0c\u7ec4\u4ef6\u6216\u63d2\u4ef6\u5361\u5c06\u81ea\u52a8\u751f\u6210\u57fa\u672c\u590d\u4f4d\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#perst-fundamental-reset-generation","title":"PERST# Fundamental Reset Generation","text":"<p>PERST# \u57fa\u672c\u590d\u4f4d\u7684\u4ea7\u751f</p> <p>\u4e2d\u592e\u8d44\u6e90\u8bbe\u5907\uff08\u5982PCI Express\u7cfb\u7edf\u4e2d\u7684\u82af\u7247\u7ec4\uff09\u63d0\u4f9b\u8fd9\u79cdreset\u3002\u4f8b\u5982\uff0c\u56fe18\u20101\u4e2d\u7684IO\u63a7\u5236\u5668\u96c6\u7ebf\u5668\uff08ICH\uff09\u82af\u7247\u53ef\u4ee5\u6839\u636e\u7cfb\u7edf\u7535\u6e90\u2018 POWERGOOD \u2019\u4fe1\u53f7\u7684\u72b6\u6001\u751f\u6210PERST#\u4fe1\u53f7\uff0c\u56e0\u4e3a\u8fd9\u8868\u660e\u4e3b\u7535\u6e90\u5df2\u6253\u5f00\u4e14\u7a33\u5b9a\u3002\u5982\u679c\u7535\u6e90\u5173\u95ed\uff0cPOWERGOOD\u5207\u6362\u5e76\u5bfc\u81f4PERST#\u65ad\u8a00\u548c\u53d6\u6d88\u65ad\u8a00\uff0c\u5bfc\u81f4\u51b7\u590d\u4f4d(Cold Reset)\u3002\u7cfb\u7edf\u8fd8\u53ef\u4ee5\u63d0\u4f9b\u4e00\u79cd\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u5207\u6362PERST#\u7684\u65b9\u6cd5\u6765\u5b8c\u6210\u70ed\u91cd\u7f6e(Warm Reset)\u3002</p> <p>PERST#\u4fe1\u53f7\u9988\u9001\u4e3b\u677f\u4e0a\u7684\u6240\u6709PCI Express\u8bbe\u5907\uff0c\u5305\u62ec\u8fde\u63a5\u5668\u548c\u56fe\u5f62\u63a7\u5236\u5668\u3002\u8bbe\u5907\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528PERST#\uff0c\u4f46\u4e0d\u662f\u5fc5\u987b\u8981\u6c42\u8fd9\u6837\u505a\u3002PERST#\u4fe1\u53f7\u4e5f\u9988\u9001\u5982\u56fe\u6240\u793a\u7684PCIe-to-PCI-X\u6865\u3002\u6865\u603b\u662f\u5c06\u4e3b\uff08upstream\uff09\u603b\u7ebf\u4e0a\u7684\u590d\u4f4d\u8f6c\u53d1\u5230\u4ece\uff08downstream\uff09\u603b\u7ebf\u4e0a\uff0c\u56e0\u6b64PCI\u2010X\u603b\u7ebf\u770b\u5230RST#\u65ad\u8a00\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#autonomous-reset-generation","title":"Autonomous Reset Generation","text":"<p>\u81ea\u52a8\u590d\u4f4d\u7684\u4ea7\u751f</p> <p>\u4e00\u4e2a\u8bbe\u5907\u5fc5\u987b\u88ab\u8bbe\u8ba1\u6210\u5728\u4e3b\u7535\u6e90\u5e94\u7528\u65f6\u5728\u786c\u4ef6\u4e2d\u4ea7\u751f\u81ea\u5df1\u7684\u590d\u4f4d\u3002spec\u6ca1\u6709\u8bf4\u660e\u8fd9\u5c06\u5982\u4f55\u5b9e\u73b0\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u81ea\u590d\u4f4d\u673a\u5236(self-reset)\u5185\u7f6e\u5230\u8bbe\u5907\u4e2d\u6216\u4f5c\u4e3a\u5916\u90e8\u903b\u8f91\u6dfb\u52a0\u3002\u4f8b\u5982\uff0c\u68c0\u6d4b\u5230Power-On\u7684\u63d2\u4ef6\u5361\u53ef\u4ee5\u4f7f\u7528\u8be5\u4e8b\u4ef6\u5bf9\u5176\u8bbe\u5907\u4ea7\u751f\u672c\u5730\u590d\u4f4d\u3002\u5982\u679c\u8bbe\u5907\u68c0\u6d4b\u5230\u5176\u529f\u7387(power)\u8d85\u51fa\u6307\u5b9a\u7684\u9650\u5236\uff0c\u5219\u5fc5\u987b\u81ea\u52a8\u590d\u4f4d\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#link-wakeup-from-l2-low-power-state","title":"Link Wakeup from L2 Low Power State","text":"<p>\u94fe\u8def\u4eceL2\u4f4e\u529f\u8017\u72b6\u6001\u5524\u9192</p> <p>\u4f5c\u4e3a\u9700\u8981\u81ea\u4e3b\u590d\u4f4d\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4e00\u4e2a\u8bbe\u5907\u7684\u4e3b\u7535\u6e90\u4f5c\u4e3a\u7535\u6e90\u7ba1\u7406\u7b56\u7565\u7684\u4e00\u90e8\u5206\u88ab\u5173\u95ed\uff0c\u5982\u679c\u5b83\u88ab\u8bbe\u8ba1\u4e3a\u53d1\u51fa\u5524\u9192\u4fe1\u53f7\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u80fd\u591f\u8bf7\u6c42\u6062\u590d\u5230\u5168\u529f\u7387\u3002\u8bbe\u5907\u6062\u590d\u4f9b\u7535\u540e\uff0c\u5fc5\u987b\u8fdb\u884c\u590d\u4f4d\u3002\u7cfb\u7edf\u7684\u7535\u6e90\u63a7\u5236\u5668\u53ef\u4ee5\u5c06PERST#\u5f15\u811a\u65ad\u8a00\u5230\u8bbe\u5907\u4e0a\uff0c\u5982\u56fe18 - 1\u6240\u793a\uff0c\u4f46\u662f\u5982\u679c\u5b83\u4e0d\u8fd9\u6837\u505a\uff0c\u6216\u8005\u5982\u679c\u8bbe\u5907\u4e0d\u652f\u6301PERST#\uff0c\u5f53\u8bbe\u5907\u68c0\u6d4b\u5230\u4e3b\u7535\u6e90\u91cd\u65b0\u5e94\u7528\u65f6\uff0c\u5b83\u5fc5\u987b\u81ea\u52a8\u4ea7\u751f\u81ea\u5df1\u7684\u57fa\u672c\u590d\u4f4d</p> <p></p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#hot-reset-in-band-reset","title":"Hot Reset (In-band Reset)","text":"<p>\u70ed\u590d\u4f4d\uff08\u5e26\u5185\u590d\u4f4d\uff09</p> <p>\u901a\u8fc7\u53d1\u9001\u51e0\u4e2aTS1\uff08\u5176\u5185\u5bb9\u5982\u56fe18\u20102\u6240\u793a\uff09\uff0c\u4f7f\u7528symbol 5\u7684bit 0\u65ad\u8a00\uff0c\u70ed\u590d\u4f4d\u5728\u9891\u5e26\u5185\u4ece\u4e00\u4e2a\u94fe\u8def\u90bb\u5c45\u4f20\u64ad\u5230\u53e6\u4e00\u4e2a\u94fe\u8def\u90bb\u5c45\u3002\u8fd9\u4e9bts1\u5728\u6240\u6709Lane\u4e0a\u53d1\u9001\uff0c\u4f7f\u7528\u5148\u524d\u534f\u5546\u7684Link\u548cLane\u53f7\uff0c\u65f6\u95f4\u4e3a2\u6beb\u79d2\u3002\u4e00\u65e6\u88ab\u53d1\u9001\uff0c\u70ed\u590d\u4f4d\u7684\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u90fd\u5c06\u5728 Detect LTSSM\u72b6\u6001\u7ed3\u675f\uff08\u53c2\u89c1\u7b2c612\u9875\u7684\u201c\u70ed\u590d\u4f4d\u72b6\u6001\u201d\uff09\u3002</p> <p></p> <p>\u70ed\u590d\u4f4d\u662f\u901a\u8fc7\u5728\u6865\u7684\u6865\u63a7\u914d\u7f6e\u5bc4\u5b58\u5668\u4e2d\u8bbe\u7f6e\u4e8c\u6b21\u603b\u7ebf\u590d\u4f4d\u4f4d(Secondary Bus Reset bit in a bridge\u2019s Bridge Control configuration register)\u5728\u8f6f\u4ef6\u4e2d\u542f\u52a8\u7684\uff0c\u5982\u56fe18\u20105\u6240\u793a\u3002\u56e0\u6b64\uff0c\u53ea\u6709\u5305\u542b\u6865\u7684\u8bbe\u5907\uff0c\u5982Root Complex\u6216Switch\uff0c\u624d\u80fd\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u5728\u5176\u4e0a\u884c\u7aef\u53e3(Upstream Port)\u63a5\u6536\u5230\u70ed\u590d\u4f4d\u7684switch\u5fc5\u987b\u5c06\u5176\u5e7f\u64ad\u5230\u6240\u6709\u7684\u4e0b\u884c\u7aef\u53e3(Downstream Ports)\u5e76\u8fdb\u884c\u81ea\u8eab\u590d\u4f4d\u3002\u63a5\u6536\u70ed\u590d\u4f4d\u7684switch\u4e0b\u6e38\u6240\u6709\u8bbe\u5907\u5c06\u81ea\u884c\u590d\u4f4d\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#response-to-receiving-hot-reset","title":"Response to Receiving Hot Reset","text":"<p>\u63a5\u6536\u70ed\u590d\u4f4d\u54cd\u5e94</p> <ul> <li>\u8bbe\u5907\u7684LTSSM\u7ecf\u5386Recovery \u548cHot Reset state\uff0c\u7136\u540e\u56de\u5230Detect state\uff0c\u5728Detect state\u5f00\u59cb\u94fe\u8def\u8bad\u7ec3\u8fc7\u7a0b\u3002</li> <li>\u6240\u6709\u8bbe\u5907\u7684\u72b6\u6001\u673a\uff0c\u786c\u4ef6\u903b\u8f91\uff0c\u7aef\u53e3\u72b6\u6001\u548c\u914d\u7f6e\u5bc4\u5b58\u5668\uff08\u9664\u4e86\u7c98\u6027\u5bc4\u5b58\u5668[sticky registers]\uff09\u521d\u59cb\u5316\u4e3a\u9ed8\u8ba4\u6761\u4ef6\u3002</li> </ul>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#switches-generate-hot-reset-on-downstream-ports","title":"Switches Generate Hot Reset on Downstream Ports","text":"<p>\u4ea4\u6362\u673a(switch)\u7684\u4e0b\u884c\u7aef\u53e3\u751f\u6210\u70ed\u590d\u4f4d</p> <p>\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0c\u4ea4\u6362\u673a\u5728\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u4e0a\u4ea7\u751f\u70ed\u590d\u4f4d\uff1a</p> <ul> <li>switch\u7684\u4e0a\u884c\u7aef\u53e3\u6536\u5230\u70ed\u590d\u4f4d\u3002</li> <li>\u5bf9\u4e8eswitch\u6216\u7f51\u6865(bridge)\u7684\u4e0a\u884c\u7aef\u53e3\uff0c\u5982\u679c\u6570\u636e\u94fe\u8def\u5c42\u62a5\u544aDL_Down state\uff0c\u5176\u6548\u679c\u4e0e\u70ed\u590d\u4f4d\u975e\u5e38\u76f8\u4f3c\u3002\u5f53\u4e0a\u6e38\u7aef\u53e3\u7531\u4e8e\u9519\u8bef\u800c\u65e0\u6cd5\u901a\u8fc7\u7269\u7406\u5c42\u6216\u6570\u636e\u94fe\u8def\u5c42\u6062\u590d\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4e0e\u4e0a\u6e38\u8bbe\u5907\u5931\u53bb\u8fde\u63a5\u7684\u60c5\u51b5\u3002</li> <li>\u8f6f\u4ef6\u8bbe\u7f6e\u4e0e\u4e0a\u6e38\u7aef\u53e3\u76f8\u5173\u7684\u6865\u63a7\u5236\u914d\u7f6e\u5bc4\u5b58\u5668\u7684\u201cSecondary Bus Reset\u201d\u4f4d\uff0c\u5982\u56fe18 - 3\u6240\u793a</li> </ul> <p></p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#bridges-forward-hot-reset-to-the-secondary-bus","title":"Bridges Forward Hot Reset to the Secondary Bus","text":"<p>\u5982\u679c\u4e00\u4e2a\u6865\uff0c\u5982PCI Express-to-PCI\uff08\u2010X\uff09\u6865\u68c0\u6d4b\u5230\u5176\u4e0a\u6e38\u7aef\u53e3\u4e0a\u7684\u70ed\u590d\u4f4d\uff0c\u5b83\u5fc5\u987b\u5728\u5176secondry PCI\uff08\u2010X\uff09\u603b\u7ebf\u4e0a\u65ad\u8a00PRST#\u4fe1\u53f7\uff0c\u5982\u56fe18\u20104\u6240\u793a\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#software-generation-of-hot-reset","title":"Software Generation of Hot Reset","text":"<p>\u8f6f\u4ef6\u901a\u8fc7\u5728\u8be5\u5173\u8054\u7aef\u53e3\u914d\u7f6e\u5934\u7684\u6865\u63a7\u5236\u5bc4\u5b58\u5668\u4e2d\u7684\u201cSecondary Bus Reset\u201c\u4f4d\u51991\u540e0\uff0c\u5728\u7279\u5b9a\u7aef\u53e3\u4e0a\u751f\u6210\u70ed\u590d\u4f4d(\u53c2\u89c1840\u9875\u7684\u56fe18\u20105)\u3002</p> <p>\u8003\u8651838\u9875\u56fe18\u20103\u6240\u793a\u7684\u4f8b\u5b50\u3002\u8f6f\u4ef6\u8bbe\u7f6eswitch A\u7684\u5de6\u4e0b\u6e38\u7aef\u53e3\u7684\u201cSecondary Bus Reset\u201c\u5bc4\u5b58\u5668\uff0c\u4f7f\u5176\u53d1\u9001\u5e26\u6709\u70ed\u590d\u4f4d\u4f4d\u8bbe\u7f6e\u7684TS1\u6709\u5e8f\u96c6\u3002switch B\u5728\u5176\u4e0a\u884c\u7aef\u53e3\u63a5\u6536\u5230\u6b64Hot Reset\uff0c\u5e76\u5c06\u5176\u8f6c\u53d1\u7ed9\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u3002</p> <p></p> <p>\u5982\u679c\u8f6f\u4ef6\u8bbe\u7f6e\u4e86switch\u4e0a\u884c\u7aef\u53e3\u7684\"Secondary Bus Reset\"\u4f4d\uff0c\u5219switch\u4f1a\u5728\u5176\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u4e0a\u4ea7\u751f\u70ed\u590d\u4f4d\uff0c\u5982\u56fe18 - 4\u6240\u793a\u3002\u5728\u8fd9\u91cc\uff0c\u8f6f\u4ef6\u5728switch C\u7684\u4e0a\u884c\u7aef\u53e3\u8bbe\u7f6e\"Secondary Bus Reset\"\u4f4d\uff0c\u4f7f\u5176\u5728\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u4e0a\u53d1\u9001\u5e26\u6709\u70ed\u590d\u4f4d\u4f4d\u7684TS1\u3002PCIe-to-PCI\u6865\u63a5\u6536\u6b64\u70ed\u590d\u4f4d\uff0c\u5e76\u901a\u8fc7\u65ad\u8a00PRST#\u5c06\u5176\u8f6c\u79fb\u5230PCI\u603b\u7ebf\u4e0a\u3002</p> <p>\u8bbe\u7f6e\"Secondary Bus Reset\"\u4f4d\u5bfc\u81f4\u7aef\u53e3\u7684LTSSM\u8f6c\u6362\u5230Recovery\u72b6\u6001\uff08\u6709\u5173LTSSM\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u7b2c519\u9875\u7684\u201cLTSSM\u72b6\u6001\u6982\u8ff0\u201d\uff09\uff0c\u5728\u90a3\u91cc\u5b83\u751f\u6210\u5177\u6709Hot reset\u4f4d\u96c6\u7684TS1\u3002TS1\u8fde\u7eed\u4ea7\u751f2ms\uff0c\u7136\u540e\u7aef\u53e3\u9000\u51fa\u5230Detect\u72b6\u6001\uff0c\u51c6\u5907\u5f00\u59cbLink\u8bad\u7ec3\u8fc7\u7a0b</p> <p>Hot reset TS1\u7684\u63a5\u6536\u7aef\uff08\u603b\u662f\u4e0b\u6e38\uff09\u4e5f\u4f1a\u8fdb\u5165Recovery\u72b6\u6001\u3002\u5f53\u5b83\u770b\u5230\u4e24\u4e2a\u8fde\u7eed\u7684TS1\u8bbe\u7f6e\u4e86Hot Reset\u4f4d\u65f6\uff0c\u5b83\u5c06\u8fdb\u5165Hot Reset\u72b6\u6001\uff0c\u8d85\u65f62ms\uff0c\u7136\u540e\u9000\u51fa\u5230Detect\u3002\u4e0a\u6e38\u548c\u4e0b\u6e38\u7aef\u53e3\u90fd\u88ab\u521d\u59cb\u5316\uff0c\u6700\u7ec8\u5904\u4e8e\u68c0\u6d4b\u72b6\u6001\uff0c\u51c6\u5907\u5f00\u59cb\u94fe\u8def\u8bad\u7ec3\u3002\u5982\u679c\u4e0b\u6e38\u8bbe\u5907\u4e5f\u662f\u4ea4\u6362\u673a\u6216\u7f51\u6865\uff0c\u5b83\u4e5f\u4f1a\u5411\u5176\u4e0b\u6e38\u7aef\u53e3\u8fdb\u884c\u70ed\u590d\u4f4d\uff0c\u5982\u56fe18 - 3\u6240\u793a\u3002</p> <p></p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#software-can-disable-the-link","title":"Software Can Disable the Link","text":"<p>\u8f6f\u4ef6\u53ef\u4ee5\u7981\u7528\u94fe\u8def</p> <p>\u8f6f\u4ef6\u4e5f\u53ef\u4ee5\u7981\u7528\u4e00\u4e2aLink\uff0c\u8feb\u4f7f\u5b83\u8fdb\u5165\u7535\u5b50\u7a7a\u95f2\u72b6\u6001(Electrical Idle)\uff0c\u5e76\u4fdd\u6301\u5728\u90a3\u91cc\uff0c\u76f4\u5230\u8fdb\u4e00\u6b65\u901a\u77e5\u3002\u5728\u8fd9\u4e00\u70b9\u4e0a\u63d0\u5230\u7684\u539f\u56e0\u662f\uff0c\u7981\u7528Link\u4e5f\u4f1a\u5bf9\u4e0b\u6e38\u7ec4\u4ef6\u9020\u6210\u70ed\u590d\u4f4d(hot reset)\u7684\u5f71\u54cd\u3002\u901a\u8fc7\u5728\u4e0b\u884c\u7aef\u53e3\u7684\u94fe\u8def\u63a7\u5236\u5bc4\u5b58\u5668(Link Control Register)\u4e2d\u8bbe\u7f6e\u94fe\u8def\u7981\u7528\u4f4d\u6765\u5b9e\u73b0\u7981\u7528\uff0c\u5982\u56fe18\u20106\u6240\u793a\u3002\u8fd9\u5c06\u5bfc\u81f4\u7aef\u53e3\u8fdb\u5165Recovery LTSSM\u72b6\u6001\uff0c\u5e76\u5f00\u59cb\u53d1\u9001\u8bbe\u7f6e\u4e86\u7981\u7528\u4f4d\u7684TS1\u3002\u7531\u4e8e\u8fd9\u53ea\u80fd\u5728\u94fe\u8def\u88ab\u7981\u7528\u7684\u60c5\u51b5\u4e0b\u5bf9\u4e0b\u884c\u7aef\u53e3\u8fdb\u884c\u63a7\u5236\uff0c\u56e0\u6b64\u8be5\u4f4d\u4fdd\u7559\u7ed9\u4e0a\u884c\u7aef\u53e3\uff08\u5982\u7aef\u70b9\u6216\u4ea4\u6362\u673a\u4e0a\u884c\u7aef\u53e3\uff09\u3002</p> <p></p> <p>\u5f53\u4e0a\u884c\u7aef\u53e3\u8bc6\u522b\u5230\u6709\u7981\u7528\u4f4d\u7684TS1\u65f6\uff0c\u5b83\u7684\u7269\u7406\u5c42\u5411\u94fe\u8def\u5c42\u53d1\u9001LinkUp=0 \uff08false\uff09\u4fe1\u53f7\uff0c\u6240\u6709\u7684lane\u8fdb\u5165\u7535\u7a7a\u95f2\u72b6\u6001\u3002\u5728\u8d85\u65f62ms\u540e\uff0c\u4e0a\u6e38\u7aef\u53e3\u5c06\u8fdb\u5165Detect\u72b6\u6001\uff0c\u4f46\u4e0b\u6e38\u7aef\u53e3\u5c06\u4fdd\u6301\u5728Disabled LTSSM\u72b6\u6001\uff0c\u76f4\u5230\u88ab\u6307\u793a\u9000\u51fa\u5b83\uff08\u4f8b\u5982\u901a\u8fc7\u6e05\u9664Link Disable\u4f4d\uff09\uff0c\u56e0\u6b64\u94fe\u8def\u5c06\u4fdd\u6301\u7981\u7528\u72b6\u6001\uff0c\u5e76\u4e14\u5728\u6b64\u4e4b\u524d\u4e0d\u4f1a\u5c1d\u8bd5\u8bad\u7ec3\u3002</p> <p></p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#function-level-reset-flr","title":"Function Level Reset (FLR)","text":"<p>\u529f\u80fd\u7ea7\u590d\u4f4d</p> <p>FLR \u80fd\u529b\u5141\u8bb8\u8f6f\u4ef6\u5728\u4e00\u4e2a\u591afuntion\u8bbe\u5907\u4e2d\u91cd\u7f6e\u4e00\u4e2afunction\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u5b83\u4eec\u6240\u6709\u4eba\u5171\u4eab\u7684Link\u3002\u5b83\u7684\u5b9e\u73b0\u662f\u5f3a\u70c8\u63a8\u8350\u7684\uff0c\u4f46\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u6240\u4ee5\u8f6f\u4ef6\u5728\u5c1d\u8bd5\u4f7f\u7528\u5b83\u4e4b\u524d\u9700\u8981\u901a\u8fc7\u68c0\u67e5Device Capabilities Register\u6765\u786e\u8ba4\u5b83\u7684\u53ef\u7528\u6027\uff0c\u5982\u56fe18 - 8\u6240\u793a\u3002\u5982\u679c\u8bbe\u7f6e\u4e86Function-Level Reset Capability\u4f4d\uff0c\u5219\u53ea\u9700\u5728Device Control Register\u4e2d\u8bbe\u7f6eIni-tiate Function-Level Reset\u4f4d\u5373\u53ef\u542f\u52a8FLR\uff0c\u5982\u56fe18 - 9\u6240\u793a\u3002</p> <p></p> <p></p> <p>\u8be5spec\u63d0\u5230\u4e86\u51e0\u4e2a\u4f8b\u5b50\uff0c\u9f13\u52b1\u6dfb\u52a0FLR\uff1a</p> <ol> <li>\u63a7\u5236Function\u7684\u8f6f\u4ef6\u53ef\u80fd\u4f1a\u9047\u5230\u95ee\u9898\uff0c\u4e0d\u518d\u6b63\u5e38\u8fd0\u884c\u3002\u9632\u6b62\u6570\u636e\u635f\u574f\u9700\u8981\u91cd\u7f6e\u8be5\u529f\u80fd\uff0c\u4f46\u5982\u679c\u8be5\u8bbe\u5907\u5185\u7684\u5176\u4ed6\u529f\u80fd\u4ecd\u7136\u6b63\u5e38\u5de5\u4f5c\uff0c\u5219\u6700\u597d\u80fd\u591f\u91cd\u7f6e\u6709\u95ee\u9898\u7684Function\u3002</li> <li>\u5728\u865a\u62df\u5316\u73af\u5883\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4ece\u4e00\u4e2a\u786c\u4ef6\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u786c\u4ef6\uff0c\u56e0\u6b64\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u4ece\u4e00\u4e2aFunction\u79fb\u51fa\u65f6\uff0c\u52a1\u5fc5\u786e\u4fdd\u8be5Function\u4e0d\u4fdd\u7559\u6709\u5173\u5176\u6b63\u5728\u6267\u884c\u7684\u64cd\u4f5c\u7684\u4efb\u4f55\u4fe1\u606f\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u53ef\u80fd\u88ab\u89c6\u4e3a\u673a\u5bc6\u7684\u4fe1\u606f\u5bf9\u8fd0\u884c\u5728\u8be5\u51fd\u6570\u4e0a\u7684\u65b0\u5e94\u7528\u7a0b\u5e8f\u53ef\u89c1\u3002\u8fc1\u79fb\u4e4b\u524d\u7684\u5e94\u7528\u7a0b\u5e8f\u540e\u8fdb\u884c\u6e05\u7406\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u5c31\u662f\u91cd\u7f6eFunction\u3002</li> <li>\u5f53\u8f6f\u4ef6\u4e3aFunction\u91cd\u65b0\u6784\u5efa\u8f6f\u4ef6\u5806\u6808\u65f6\uff0c\u6709\u65f6\u9700\u8981\u9996\u5148\u5c06Function\u7f6e\u4e8e\u672a\u521d\u59cb\u5316\u72b6\u6001\u3002\u548c\u524d\u9762\u4e00\u6837\uff0c\u907f\u514d\u91cd\u7f6e\u5171\u4eabLink\u7684\u6240\u6709Function\u662f\u53ef\u53d6\u7684\u3002</li> </ol> <p>\u53e6\u4e00\u4e2a\u7279\u70b9\u6ca1\u6709\u51fa\u73b0\u5728spec\u7684\u6848\u4f8b\u5217\u8868\u4e2d\uff0c\u4f46\u5b83\u672c\u8eab\u4ecd\u7136\u662f\u4e00\u4e2a\u6fc0\u52b1\u56e0\u7d20\u3002\u867d\u7136\u4f20\u7edf\u7684\u91cd\u7f6e(convention reset)\u5c06\u91cd\u65b0\u521d\u59cb\u5316\u8bbe\u5907\u5185\u7684\u6240\u6709\u4e1c\u897f\uff0c\u4f46\u5b83\u5e76\u4e0d\u8981\u6c42\u6240\u6709\u5916\u90e8\u6d3b\u52a8\uff0c\u4f8b\u5982\u7f51\u7edc\u63a5\u53e3\u4e0a\u7684\u6d41\u91cf\uff0c\u5fc5\u987b\u7acb\u5373\u505c\u6b62\u3002FLR\u6dfb\u52a0\u4e86\u8fd9\u4e2a\u8981\u6c42\uff0c\u5e76\u4e14\u662f\u552f\u4e00\u7684\u91cd\u7f6e\u3002</p> <p>FLR\u91cd\u7f6eFunction\u7684\u5185\u90e8\u72b6\u6001\u548c\u5bc4\u5b58\u5668\uff0c\u4f7f\u5176\u9759\u9ed8\uff0c\u4f46\u4e0d\u5f71\u54cd\u4efb\u4f55\u7c98\u6027\u4f4d(sticky bits)\uff0c\u6216\u786c\u4ef6\u521d\u59cb\u5316\u4f4d\uff0c\u6216Link\u4e0a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\uff0c\u5982\u6355\u83b7\u7535\u6e90\uff0cASPM\u63a7\u5236\uff0cMax_Payload_Size\u6216\u865a\u62df\u901a\u9053\u5bc4\u5b58\u5668\u3002\u5982\u679c\u53d1\u9001\u4e86\u672a\u5b8c\u6210\u7684Assert INTx\u4e2d\u65ad\u6d88\u606f\uff0c\u5219\u5fc5\u987b\u53d1\u9001\u76f8\u5e94\u7684Deassert INTx\u6d88\u606f\uff0c\u9664\u975e\u8be5\u4e2d\u65ad\u88ab\u5185\u90e8\u53e6\u4e00\u4e2a\u4ecd\u7136\u65ad\u8a00\u5b83\u7684Function\u5171\u4eab\u3002\u5f53\u6536\u5230FLR\u65f6\uff0c\u8be5Function\u7684\u6240\u6709\u5916\u90e8\u6d3b\u52a8\u90fd\u5fc5\u987b\u505c\u6b62\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#time-allowed","title":"Time Allowed","text":"<p>\u65f6\u95f4\u5141\u8bb8\u7684</p> <p>Function\u5fc5\u987b\u5728100ms\u5185\u5b8c\u6210FLR\u3002\u7136\u800c\uff0c\u5982\u679c\u6709\u4efb\u4f55\u5c1a\u672a\u8fd4\u56de\u7684\u5206\u5272\u5b8c\u6210\uff0c\u8f6f\u4ef6\u53ef\u80fd\u9700\u8981\u5ef6\u8fdf\u542f\u52a8FLR\uff08\u7531Device Status Register\u4e2d\u8bbe\u7f6eTransactions Pending\u4f4d\u8868\u793a\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8f6f\u4ef6\u5fc5\u987b\u5728\u521d\u59cb\u5316FLR\u4e4b\u524d\u7b49\u5f85\u5b83\u4eec\u5b8c\u6210\uff0c\u6216\u8005\u5728FLR\u4e4b\u540e\u7b49\u5f85100ms\u624d\u80fd\u5c1d\u8bd5\u91cd\u65b0\u521d\u59cb\u5316Function\u3002\u5982\u679c\u4e0d\u80fd\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u5c31\u4f1a\u51fa\u73b0\u6f5c\u5728\u7684\u6570\u636e\u635f\u574f\u95ee\u9898\uff1aFunction\u53ef\u80fd\u62c6\u5206\u4e86\u672a\u5b8c\u6210\u7684\u4e8b\u52a1\uff0c\u4f46\u91cd\u7f6e\u4f1a\u5bfc\u81f4\u5b83\u5931\u53bb\u5bf9\u5b83\u4eec\u7684\u8ddf\u8e2a\u3002\u5982\u679c\u4ed6\u4eec\u7a0d\u540e\u8fd4\u56de\uff0c\u4ed6\u4eec\u53ef\u80fd\u8bef\u4ee5\u4e3a\u662f\u5bf9\u81eaFLR\u4ee5\u6765\u53d1\u51fa\u7684\u65b0\u8bf7\u6c42\u7684\u54cd\u5e94\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0cspec\u5efa\u8bae\u8f6f\u4ef6\u5e94\u8be5\uff1a</p> <ol> <li>\u4e0e\u5176\u4ed6\u53ef\u80fd\u8bbf\u95ee\u8be5Function\u7684\u8f6f\u4ef6\u534f\u8c03\uff0c\u4ee5\u786e\u4fdd\u5b83\u5728FLR\u671f\u95f4\u4e0d\u4f1a\u5c1d\u8bd5\u8bbf\u95ee\u3002</li> <li>\u6e05\u9664\u6574\u4e2a\u547d\u4ee4\u5bc4\u5b58\u5668(Command Register)\uff0c\u4ece\u800c\u6682\u505cFunction\u3002</li> <li>\u901a\u8fc7\u8f6e\u8be2Device Status Register\u4e2d\u7684\u4e8b\u52a1\u7b49\u5f85\u4f4d(Transactions Pending bit)\uff0c\u786e\u4fdd\u5148\u524d\u8bf7\u6c42\u7684\u5b8c\u6210\u5df2\u8fd4\u56de\uff0c\u76f4\u5230\u5b83\u88ab\u6e05\u9664\u6216\u7b49\u5f85\u8db3\u591f\u957f\u7684\u65f6\u95f4\u4ee5\u786e\u4fdd\u5b8c\u6210\u4e0d\u4f1a\u88ab\u8fd4\u56de\u3002\u591a\u957f\u65f6\u95f4\u624d\u591f\u957f\uff1f\u5982\u679c\u4f7f\u7528\u4e86\u201c\u5b8c\u6210\u8d85\u65f6\u201d\uff0c\u8bf7\u7b49\u5f85\u8d85\u65f6\u65f6\u95f4\u540e\u518d\u53d1\u9001FLR\u3002\u5982\u679c\u5b8c\u6210\u8d85\u65f6\u88ab\u7981\u7528\uff0c\u90a3\u4e48\u7b49\u5f85\u81f3\u5c11100ms\u3002</li> <li>\u542f\u52a8FLR\u548c\u7b49\u5f85100ms\u3002</li> <li>\u8bbe\u7f6eFunction\u7684\u914d\u7f6e\u5bc4\u5b58\u5668\u5e76\u4f7f\u5176\u6b63\u5e38\u8fd0\u884c\u3002</li> </ol> <p>\u5f53FLR\u5b8c\u6210\u65f6\uff0c\u4e0d\u7ba1\u65f6\u95f4\u5982\u4f55\uff0cTransaction Pending\u4f4d\u5fc5\u987b\u88ab\u6e05\u9664\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#behavior-during-flr","title":"Behavior During FLR","text":"<p>FLR\u671f\u95f4\u7684\u884c\u4e3a</p> <p>spec\u7f16\u5199\u8005\u9009\u62e9\u7528\u76f8\u5f53\u5bbd\u6cdb\u7684\u672f\u8bed\u6765\u63cf\u8ff0Function reset\u7684\u884c\u4e3a\uff0c\u4ee5\u4fbf\u4e0d\u6392\u9664\u8bbe\u8ba1\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u91c7\u53d6\u7684\u4efb\u4f55\u5185\u90e8\u6b65\u9aa4\u3002\u89c4\u8303\u4e2d\u5217\u51fa\u4e86\u4ee5\u4e0b\u884c\u4e3a\uff1a</p> <ul> <li>\u8be5Function\u4e0d\u80fd\u5728\u5916\u90e8\u63a5\u53e3\u4e0a\u663e\u793a\u4e3a\u5177\u6709\u6d3b\u52a8\u4e3b\u673a\u7684\u521d\u59cb\u5316\u9002\u914d\u5668(adapter)\u3002\u786e\u4fdd\u7ec8\u6b62\u5916\u90e8\u63a5\u53e3\u4e0a\u7684\u6240\u6709\u6d3b\u52a8\u7684\u6b65\u9aa4\u5c06\u662f\u7279\u5b9a\u4e8e\u8bbe\u8ba1\u7684\u3002\u4f8b\u5982\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u7f51\u7edc\u9002\u914d\u5668\u5fc5\u987b\u4e0d\u54cd\u5e94\u9700\u8981\u6d3b\u52a8\u4e3b\u673a\u7684\u8bf7\u6c42\u3002</li> <li>\u8be5Function\u4e0d\u80fd\u4fdd\u7559\u4efb\u4f55\u8f6f\u4ef6\u53ef\u8bfb\u7684\u72b6\u6001\uff0c\u8fd9\u4e9b\u72b6\u6001\u53ef\u80fd\u5305\u542b\u4ee5\u524d\u4f7f\u7528\u51fd\u6570\u65f6\u7559\u4e0b\u7684\u79d8\u5bc6\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u5fc5\u987b\u6e05\u9664\u6216\u968f\u673a\u5316\u4efb\u4f55\u5185\u90e8\u5185\u5b58\u3002</li> <li>\u8be5Function\u5fc5\u987b\u7531\u4e0b\u4e00\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u6b63\u5e38\u914d\u7f6e\u3002</li> <li>\u8be5Function\u5fc5\u987b\u8fd4\u56de\u5bfc\u81f4FLR\u7684\u914d\u7f6e\u5199\u5165\u7684\u5b8c\u6210\uff0c\u7136\u540e\u542f\u52a8FLR\u3002</li> </ul> <p>\u5f53FLR\u6b63\u5728\u8fdb\u884c\u65f6\uff1a</p> <ul> <li>\u4efb\u4f55\u5230\u8fbe\u7684\u8bf7\u6c42\u90fd\u5141\u8bb8\u88ab\u9759\u9ed8\u5730\u4e22\u5f03\uff0c\u800c\u4e0d\u8bb0\u5f55\u5b83\u4eec\u6216\u53d1\u51fa\u9519\u8bef\u4fe1\u53f7\u3002\u4f46\u662f\uff0c\u5fc5\u987b\u66f4\u65b0\u6d41\u91cf\u63a7\u5236\u79ef\u5206\u4ee5\u7ef4\u6301link\u64cd\u4f5c\u3002</li> <li>\u4f20\u5165\u7684\u5b8c\u6210(completions)\u53ef\u4ee5\u88ab\u89c6\u4e3a\u610f\u5916\u5b8c\u6210(Unexpected Completions)\uff0c\u6216\u8005\u5728\u4e0d\u8bb0\u5f55\u5b83\u4eec\u6216\u53d1\u51fa\u9519\u8bef\u4fe1\u53f7\u7684\u60c5\u51b5\u4e0b\u88ab\u9759\u9ed8\u4e22\u5f03\u3002</li> <li>FLR\u672c\u8eab\u5fc5\u987b\u5728\u4e0a\u8ff0\u65f6\u95f4\u5185\u5b8c\u6210\uff0c\u4f46\u4e4b\u540e\u7684\u521d\u59cb\u5316\u53ef\u80fd\u9700\u8981\u66f4\u957f\u7684\u65f6\u95f4\u3002\u5982\u679c\u4e00\u4e2a\u914d\u7f6e\u8bf7\u6c42(Configuration Request)\u5728\u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u524d\u8fdb\u5165\uff0cFunction\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709CRS \uff08configuration Retry Status\uff09\u72b6\u6001\u7684completion\u3002\u4e00\u65e6\u8fd4\u56de\u5e26\u6709\u4efb\u4f55\u5176\u4ed6\u72b6\u6001\u7684completion\uff0c\u5728\u51fd\u6570\u518d\u6b21\u91cd\u7f6e\u4e4b\u524d\uff0cCRS\u72b6\u6001\u5c06\u4e0d\u518d\u662f\u5408\u6cd5\u7684\u3002</li> </ul>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#reset-exit","title":"Reset Exit","text":"<p>\u91cd\u7f6e\u9000\u51fa</p> <p>\u9000\u51fareset state\u540e\uff0c\u94fe\u8def\u8bad\u7ec3\u548c\u521d\u59cb\u5316\u5fc5\u987b\u572820ms\u5185\u5f00\u59cb\u3002\u8bbe\u5907\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u9000\u51fa\u590d\u4f4d\u72b6\u6001\uff0c\u56e0\u4e3a\u590d\u4f4d\u4fe1\u53f7\u662f\u5f02\u6b65\u7684\uff0c\u4f46\u5fc5\u987b\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u5f00\u59cb\u8bad\u7ec3\u3002</p> <p>\u4e3a\u4e86\u5141\u8bb8\u590d\u4f4d\u7ec4\u4ef6\u6267\u884c\u5185\u90e8\u521d\u59cb\u5316\uff0c\u7cfb\u7edf\u8f6f\u4ef6\u5fc5\u987b\u5728\u590d\u4f4d\u7ed3\u675f\u540e\u7b49\u5f85\u81f3\u5c11100\u6beb\u79d2\uff0c\u7136\u540e\u624d\u80fd\u5c1d\u8bd5\u5411\u5b83\u4eec\u53d1\u9001\u914d\u7f6e\u8bf7\u6c42(Configuration Request)\u3002\u5982\u679c\u8f6f\u4ef6\u5728100\u6beb\u79d2\u7684\u7b49\u5f85\u65f6\u95f4\u540e\u5411\u8bbe\u5907\u53d1\u8d77\u914d\u7f6e\u8bf7\u6c42\uff0c\u4f46\u8bbe\u5907\u4ecd\u672a\u5b8c\u6210\u5176\u81ea\u6211\u521d\u59cb\u5316\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709\u72b6\u6001CRS\u7684Completion\u3002\u7531\u4e8e\u914d\u7f6e\u8bf7\u6c42\u53ea\u80fd\u7531CPU\u53d1\u8d77\uff0c\u56e0\u6b64Completion\u5c06\u8fd4\u56de\u5230\u6839\u590d\u5408\u4f53(Root Complex)\u3002\u4f5c\u4e3a\u54cd\u5e94\uff0c\u6839\u7528\u6237(Root)\u53ef\u80fd\u4f1a\u81ea\u52a8\u91cd\u65b0\u53d1\u51fa\u914d\u7f6e\u8bf7\u6c42\uff0c\u6216\u8005\u4f7f\u6545\u969c\u5bf9\u8f6f\u4ef6\u53ef\u89c1\u3002\u8be5\u89c4\u8303\u8fd8\u6307\u51fa\uff0c\u5982\u679c\u542f\u7528\u4e86CRS\u8f6f\u4ef6\u53ef\u89c1\u6027\uff0c\u5219\u8f6f\u4ef6\u5e94\u8be5\u53ea\u4f7f\u7528100ms\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u957f\u65f6\u95f4\u8d85\u65f6\u6216\u5904\u7406\u5668\u505c\u6ede\u3002</p> <p>\u8bbe\u5907\u5728\u590d\u4f4d\u540e\u88ab\u5141\u8bb8\u6709\u6574\u65741.0\u79d2\uff08\u20100%/+50%\uff09\u7684\u65f6\u95f4\uff0c\u7136\u540e\u5b83\u4eec\u5fc5\u987b\u5bf9\u914d\u7f6e\u8bf7\u6c42\u505a\u51fa\u9002\u5f53\u7684\u54cd\u5e94\u3002\u56e0\u6b64\uff0c\u7cfb\u7edf\u5fc5\u987b\u5c0f\u5fc3\u5730\u7b49\u5f85\u90a3\u4e48\u957f\u65f6\u95f4\uff0c\u7136\u540e\u624d\u80fd\u786e\u5b9a\u4e00\u4e2a\u65e0\u54cd\u5e94\u7684\u8bbe\u5907\u574f\u4e86\u3002\u8fd9\u4e2a\u503c\u662f\u4ecePCI\u7ee7\u627f\u6765\u7684\uff0c\u9020\u6210\u8fd9\u79cd\u957f\u65f6\u95f4\u5ef6\u8fdf\u7684\u539f\u56e0\u53ef\u80fd\u662f\u4e00\u4e9b\u8bbe\u5907\u5c06\u914d\u7f6e\u7a7a\u95f4\u5b9e\u73b0\u4e3a\u672c\u5730\u5185\u5b58\uff0c\u5fc5\u987b\u5728\u914d\u7f6e\u8f6f\u4ef6\u6b63\u786e\u770b\u5230\u5b83\u4e4b\u524d\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <p>\u5b83\u7684\u521d\u59cb\u5316\u53ef\u80fd\u6d89\u53ca\u4ece\u6162\u901f\u4e32\u884cEEPROM\u590d\u5236\u5fc5\u8981\u7684\u4fe1\u606f\uff0c\u56e0\u6b64\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u3002</p>"},{"location":"pcie/pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_5","title":"\u76f8\u5173\u94fe\u63a5","text":""},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/","title":"18_SystemReset\u7cfb\u7edf\u590d\u4f4d","text":"<ul> <li>\"PCIe\"</li> <li>\"SystemReset\u7cfb\u7edf\u590d\u4f4d\"</li> <li>\"cold reset\"</li> <li>\"warm reset\"</li> <li>\"hot reset\"</li> <li>\"function\u2010level reset\"</li> </ul>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_1","title":"\u4ecb\u7ecd","text":""},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_2","title":"\u524d\u4e00\u7ae0","text":"<p>\u200b\u63cf\u8ff0\u4e86PCIe\u51fd\u6570\u4ea7\u751f\u4e2d\u65ad\u7684\u4e0d\u540c\u65b9\u5f0f\u3002\u65e7\u7684PCI\u6a21\u578b\u4f7f\u7528\u5f15\u811a\uff0c\u4f46\u662f\u8fb9\u5e26\u4fe1\u53f7\u5728\u4e32\u884c\u6a21\u578b\u4e2d\u662f\u4e0d\u53d7\u6b22\u8fce\u7684\uff0c\u56e0\u6b64\u5fc5\u987b\u652f\u6301\u5e26\u5185MSI(\u6d88\u606f\u4fe1\u53f7\u4e2d\u65ad)\u673a\u5236\u3002\u7531\u4e8e\u8f6f\u4ef6\u5411\u540e\u517c\u5bb9\u7684\u539f\u56e0\uff0cPCI INTx\u5f15\u811a\u64cd\u4f5c\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528PCIe INTx\u6d88\u606f\u6765\u6a21\u62df\u3002\u63cf\u8ff0\u4e86PCI\u4f20\u7edfINTx#\u65b9\u6cd5\u548c\u65b0\u7248\u672c\u7684MSI/MSI\u2010X\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_3","title":"\u672c\u7ae0\u8282","text":"<p>\u200b\u4ecb\u7ecdPCIe\u7684\u56db\u79cd\u590d\u4f4d\u7c7b\u578b: cold reset, warm reset, hot reset, and function\u2010level reset\u3002\u8ba8\u8bba\u4e86\u4f7f\u7528\u8fb9\u5e26\u590d\u4f4d\u4fe1\u53f7PERST#\u6765\u4ea7\u751fsystem reset\uff0c\u4ee5\u53ca\u4f7f\u7528\u5e26\u5185\u590d\u4f4d\u4fe1\u53f7TS1\u6765\u4ea7\u751fHot Reset\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_4","title":"\u4e0b\u4e00\u7ae0","text":"<p>\u200b\u4e0b\u4e00\u7ae0\u63cf\u8ff0PCI Express\u70ed\u63d2\u62d4\u6a21\u578b\u3002\u8fd8\u4e3a\u652f\u6301\u70ed\u63d2\u62d4\u529f\u80fd\u7684\u6240\u6709\u8bbe\u5907\u548c\u5916\u5f62\u56e0\u7d20\u5b9a\u4e49\u4e86\u6807\u51c6\u4f7f\u7528\u6a21\u578b\u3002\u5bf9\u4e8e\u70ed\u63d2\u62d4\u5361\u6765\u8bf4\uff0c\u7535\u6e90\u4e5f\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53\u5728\u8fd0\u884c\u65f6\u5c06\u65b0\u5361\u6dfb\u52a0\u5230\u7cfb\u7edf\u4e2d\u65f6\uff0c\u786e\u4fdd\u5176\u7535\u6e90\u9700\u6c42\u4e0d\u8d85\u8fc7\u7cfb\u7edf\u6240\u80fd\u63d0\u4f9b\u7684\u7535\u91cf\u662f\u5f88\u91cd\u8981\u7684\u3002\u9700\u8981\u4e00\u79cd\u673a\u5236\u6765\u67e5\u8be2\u548c\u63a7\u5236\u8bbe\u5907\u7684\u529f\u7387\u9700\u6c42\uff0c\u529f\u7387\u9884\u7b97\u63d0\u4f9b\u4e86\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#system-reset","title":"\u4e24\u7c7bSystem Reset","text":"<p>PCI Express\u89c4\u8303\u63cf\u8ff0\u4e86\u56db\u79cd\u7c7b\u578b\u7684\u590d\u4f4d\u673a\u5236\u3002\u5176\u4e2d\u4e09\u4e2a\u662fPCIe\u89c4\u8303\u65e9\u671f\u7248\u672c\u7684\u4e00\u90e8\u5206\uff0c\u73b0\u5728\u7edf\u79f0\u4e3a\u5e38\u89c4\u590d\u4f4d(Conventional Reset)\uff0c\u5176\u4e2d\u4e24\u4e2a\u79f0\u4e3a\u57fa\u672c\u590d\u4f4d(Function-Level Reset)\u3002</p> <p>\u968f\u77402.0\u89c4\u8303\u4fee\u8ba2\u800c\u589e\u52a0\u7684\u7b2c\u56db\u4e2a\u7c7b\u522b\u548c\u65b9\u6cd5\u88ab\u79f0\u4e3aFunction\u7ea7\u590d\u4f4d\u3002</p> <pre><code>graph TD\n    A[PCIe Reset] --&gt; B[Conventional Reset];\n    A --&gt; C[Function-Level Reset];\n    B --&gt; D[Fundamental Reset];\n    B --&gt; E[Non-Fundamental Reset];\n    C --&gt; F[PFLR] --&gt; N[\u9488\u5bf9\u591aFunction\u8bbe\u5907 \u590d\u4f4d\u5355Function\u4e0d\u5f71\u54cd\u5176\u4ed6Function];\n    C --&gt; G[VFLR] --&gt; N[\u9488\u5bf9\u591aFunction\u8bbe\u5907 \u590d\u4f4d\u5355Function\u4e0d\u5f71\u54cd\u5176\u4ed6Function];\n    D --&gt; H[Cold Reset] --&gt; L[PERST#\u8d70\u7ba1\u811a\u89e6\u53d1\u590d\u4f4d];\n    D --&gt; I[Warm Reset] --&gt; L[PERST#\u8d70\u7ba1\u811a\u89e6\u53d1\u590d\u4f4d];\n    E --&gt; J[Hot Reset] --&gt; M[TS1/TS2\u8d70\u5e26\u5185 OS\u89e6\u53d1\u590d\u4f4d];\n    E --&gt; K[Link Disable] --&gt; M[TS1/TS2\u8d70\u5e26\u5185 OS\u89e6\u53d1\u590d\u4f4d];</code></pre> \u590d\u4f4d\u7c7b\u578b \u89e6\u53d1\u65b9\u5f0f Cold Reset \u8bbe\u5907\u7684\u4e3b\u7535\u6e90\u8fdb\u884c\u4e0a\u4e0b\u7535\u5c06\u89e6\u53d1\u51b7\u590d\u4f4d\u3002 Warm Reset \u65e0\u9700\u5173\u95ed\u4e3b\u7535\u6e90\uff0c\u66f4\u6539\u670d\u52a1\u5668\u7535\u6e90\u72b6\u6001\u5bc4\u5b58\u5668\u6765\u89e6\u53d1PERST#\u7ba1\u811a\u590d\u4f4d Hot Reset \u5c06RP/Switch\u7684Bridge Control Register bit[6]\uff0c\u5373Secondary Bus Reset bit\u7f6e1\u6765\u89e6\u53d1 Link Disable \u5c06device\u7684Link Control Register bit [4]\uff0c\u5373Link Disable bit\u7f6e1\u6765\u89e6\u53d1 FLR \u670d\u52a1\u5668\u52a0\u8f7d\u7684Function Driver\u4f1a\u914d\u7f6edevice\u5404\u4e2aPF Device Control Register bit[15]\uff0c\u89e6\u53d1PFLR\u590d\u4f4d <p>\u590d\u4f4d\u57df</p> <p>Fundamental Reset\uff1a</p> <p>\u200b   \u5f53Host\u4e0a\u4e0b\u7535\u65f6\u6216\u8005\u901a\u8fc7\u914d\u7f6eHost\u5185\u5bc4\u5b58\u5668\uff0c\u5b9e\u73b0assert PERST#\u7ba1\u811a\uff0c\u901a\u8fc7PERST#\u7ba1\u811a\u6765\u590d\u4f4d\u5bf9\u63a5\u7684Switch/Device\u3002</p> <p>\u200b   \u5f53Fundamental Reset\u6709\u6548\u65f6\uff0c\u5c06\u590d\u4f4d\u6574\u4e2a\u8bbe\u5907\uff0c\u91cd\u65b0\u521d\u59cb\u5316\u6bcf\u4e2a\u72b6\u6001\u673a\u548c\u6240\u6709\u786c\u4ef6\u903b\u8f91\uff0c\u7aef\u53e3\u72b6\u6001\u548c\u914d\u7f6e\u5bc4\u5b58\u5668\uff0c\u5176\u4e2d\u9700\u8981\u6ce8\u610f\uff1aSticky Reg\u7684\u590d\u4f4d\u884c\u4e3a\u548c\u8f85\u52a9\u7535\u6e90\u6709\u5173\uff1a</p> <ul> <li>\u5b58\u5728\u8f85\u52a9\u7535\u6e90\u65f6\uff0cSticky Reg\u4e0d\u590d\u4f4d\u3002</li> <li>\u4e0d\u5b58\u5728\u8f85\u52a9\u7535\u6e90\u65f6\uff0cSticky Reg\u662f\u5426\u590d\u4f4d\uff0cspec\u672a\u660e\u786e\u89c4\u5b9a\u3002</li> </ul> <p>PERST#\uff1a</p> <ol> <li>PERST#\u590d\u4f4d\u64a4\u79bb\u540e\uff0cLTSSM\u5fc5\u987b\u572820ms\u5185\u8fdb\u5165Detect\u72b6\u6001\uff1b</li> <li>PERST#\u590d\u4f4d\u64a4\u79bb\u540e\uff0c\u4e3b\u673a\u8f6f\u4ef6\u81f3\u5c11\u5728100ms\u4e4b\u540e\u624d\u80fd\u5f00\u59cb\u53d1\u9001Config Request\uff1b</li> <li>\u82e5\u4e3b\u673a\u8f6f\u4ef6\u5728\u7b49\u5f85100ms\u65f6\u76f4\u63a5\u5f00\u59cb\u53d1\u9001Config Request\uff0c\u4f46\u8bbe\u5907\u521d\u59cb\u5316\u6d41\u7a0b\u8fd8\u672a\u7ed3\u675f\uff0c\u8bbe\u5907\u4f1a\u56de\u590dCRS\u3002</li> <li>RC\u53ef\u4ee5\u9009\u62e9\u91cd\u65b0\u53d1\u9001Config Request\uff0c\u6216\u8005\u4e0a\u62a5\u7ed9CPU\u63d0\u793a\u8bbe\u5907\u5c1a\u672aready\u3002</li> <li>\u8bbe\u5907\u6700\u591a\u53ef\u4ee5\u57281s\u5185\u5b8c\u6210\u521d\u59cb\u5316\uff0c1s\u540e\u5fc5\u987b\u8981\u80fd\u6b63\u786e\u5904\u7406Config Request\uff0c\u5426\u5219RC\u8ba4\u4e3a\u8be5\u8bbe\u5907\u51fa\u9519\uff0c\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002</li> </ol>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-resetcoldreset-warmreset","title":"Fundamental Reset(ColdReset WarmReset)","text":"<p>\u200b       \u57fa\u672c\u590d\u4f4d(Fundamental Reset) \u5728\u786c\u4ef6\u4e2d\u5904\u7406\uff0c\u590d\u4f4d\u6574\u4e2a\u8bbe\u5907\uff0c\u91cd\u65b0\u521d\u59cb\u5316\u6bcf\u4e2a\u72b6\u6001\u673a\u548c\u6240\u6709\u786c\u4ef6\u903b\u8f91\uff0c\u7aef\u53e3\u72b6\u6001\u548c\u914d\u7f6e\u5bc4\u5b58\u5668\u3002\u8be5\u89c4\u5219\u7684\u4f8b\u5916\u662f\u4e00\u7ec4\u914d\u7f6e\u5bc4\u5b58\u5668\u5b57\u6bb5\uff0c\u5b83\u4eec\u88ab\u6807\u8bc6\u4e3a\u7c98\u6027(sticky)\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4fdd\u7559\u5176\u5185\u5bb9\uff0c\u9664\u975e\u6240\u6709\u7535\u6e90\u88ab\u79fb\u9664\u3002\u8fd9\u4f7f\u5f97\u5b83\u4eec\u5bf9\u4e8e\u5b9a\u4f4d\u9700\u8981\u590d\u4f4d\u624d\u80fd\u4f7fLink\u518d\u6b21\u5de5\u4f5c\u7684\u95ee\u9898\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u8be5\u9519\u8bef\u72b6\u6001\u53ef\u4ee5\u5728\u590d\u4f4d\u540e\u4ecd\u7136\u5b58\u5728\uff0c\u5e76\u4e14\u4e4b\u540e\u53ef\u7528\u4e8e\u8f6f\u4ef6\u3002\u5982\u679c\u4e3b\u7535\u6e90\u88ab\u79fb\u9664\uff0c\u4f46Vaux\u53ef\u7528\uff0c\u8fd9\u4e5f\u5c06\u4fdd\u6301sticky bits\uff0c\u4f46\u5982\u679c\u4e3b\u7535\u6e90\u548cVaux\u90fd\u4e22\u5931\uff0csticky bits\u5c06\u4e0e\u5176\u4ed6\u4e00\u5207\u4e00\u8d77\u91cd\u7f6e\u3002</p> <p>\u200b       \u57fa\u672c\u590d\u4f4d\u5c06\u53d1\u751f\u5728\u7cfb\u7edf\u8303\u56f4\u5185\u7684\u590d\u4f4d\uff0c\u4f46\u5b83\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5355\u4e2a\u8bbe\u5907\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-reset","title":"\u4e24\u79cd\u7c7b\u578b\u7684\u57fa\u672c\u590d\u4f4d(Fundamental Reset)\u5b9a\u4e49\u5982\u4e0b:","text":"<ul> <li> <p>\u51b7\u590d\u4f4d(Cold Reset): \u8bbe\u5907\u7684\u4e3b\u7535\u6e90\u8fdb\u884c\u4e0a\u4e0b\u7535\u5c06\u89e6\u53d1\u51b7\u590d\u4f4d\u3002</p> </li> <li> <p>\u6696\u590d\u4f4d(Warm Reset)[\u53ef\u9009]:\u65e0\u9700\u5173\u95ed\u4e3b\u7535\u6e90\uff0c\u7531\u7cfb\u7edf\u7279\u5b9a\u7684\u65b9\u5f0f\u89e6\u53d1\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u66f4\u6539\u7cfb\u7edf\u7535\u6e90\u72b6\u6001\u5bc4\u5b58\u5668\u6765\u89e6\u53d1PERST#\u7ba1\u811a\u590d\u4f4d\u3002Warm Reset\u7684\u673a\u5236\u6ca1\u6709\u5728\u89c4\u8303\u4e2d\u5b9a\u4e49\uff0c\u6240\u4ee5\u7cfb\u7edf\u8bbe\u8ba1\u5e08\u5c06\u9009\u62e9\u5982\u4f55\u5b8c\u6210\u3002</p> </li> </ul>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-reset_1","title":"\u5f53\u57fa\u672c\u590d\u4f4d(Fundamental Reset) \u53d1\u751f\u65f6\uff1a","text":"<ul> <li>\u5bf9\u4e8e\u6b63\u7535\u538b\uff0c\u63a5\u6536\u5668\u7ec8\u7aef\u9700\u8981\u6ee1\u8db3ZRX\u2010HIGH\u2010IMP\u2010DC\u2010POS\u53c2\u6570\u3002\u57282.5 GT/s\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e00\u901f\u5ea6\u4e0d\u5c0f\u4e8e10 K\u03a9 /s\u3002\u5728\u8f83\u9ad8\u7684\u901f\u5ea6\u4e0b\uff0c\u5b83\u5fc5\u987b\u4e0d\u5c0f\u4e8e10k\u03a9 \u7535\u538b\u4f4e\u4e8e200mv\u4e0b, 20k\u03a9\u7535\u538b\u9ad8\u4e8e200mv\u3002These are the values when the termi\u2010 nations are not powered.</li> <li>\u7c7b\u4f3c\u5730\uff0c\u5bf9\u4e8e\u8d1f\u7535\u538b\uff0cZRX\u2010HIGH\u2010IMP\u2010DC\u2010NEG\u53c2\u6570\uff0c\u5728\u6bcf\u79cd\u60c5\u51b5\u4e0b\uff0c\u5176\u503c\u6700\u5c0f\u4e3a1k\u03a9\u3002</li> <li>\u5bf9\u4e8eGen1\u53d1\u5c04\u673a\u7ec8\u7aef\u9700\u8981\u6ee1\u8db3\u8f93\u51fa\u963b\u6297ZTX - DIFF - DC\u4ece80\u5230120\u03a9\u548c\u5bf9\u4e8eGen2\u548cGen3\u6700\u5927\u503c120\u03a9\uff0c\u4f46\u53ef\u80fd\u4f1a\u4f7f\u9a71\u52a8\u5668\u5904\u4e8e\u9ad8\u963b\u6297\u72b6\u6001\u3002</li> <li>\u53d1\u5c04\u673a\u7ec8\u7aef\u4fdd\u6301\u76f4\u6d41DC\u5171\u6a21\u7535\u538b\u57280\u52303.6V\u4e4b\u95f4\u3002</li> </ul>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#fundamental-reset_2","title":"\u5f53\u57fa\u672c\u590d\u4f4d(Fundamental Reset) \u9000\u51fa\u65f6\uff1a","text":"<ul> <li>\u5f53\u542f\u7528\u63a5\u6536\u5668\u7ec8\u6b62\u65f6\uff0c\u63a5\u6536\u5668\u5355\u7aef\u7ec8\u6b62\u5fc5\u987b\u5b58\u5728\uff0c\u4ee5\u4fbf\u63a5\u6536\u5668\u68c0\u6d4b\u6b63\u5e38\u5de5\u4f5c\uff08\u5bf9\u4e8eGen1\u548cGen2\u4e3a40\u201060\u03a9\uff0c\u5bf9\u4e8eGen3\u4e3a50\u03a9+/-20%\uff09\u3002\u8f93\u5165\u201cDetect\u201d\u65f6\uff0c\u5171\u6a21\u963b\u6297\u5fc5\u987b\u572850\u03a9+/-20%\u7684\u9002\u5f53\u8303\u56f4\u5185\u3002</li> <li>\u5fc5\u987b\u91cd\u65b0\u542f\u7528100\u03a9\u7684\u63a5\u6536\u5668\u7ec8\u6b62ZRX - DIFF - DC\uff0c\u4f7f\u5176\u5728\u8bad\u7ec3\u671f\u95f4\u88ab\u76f8\u90bb\u7684\u53d1\u5c04\u5668\u68c0\u6d4b\u5230\u3002</li> <li>\u53d1\u5c04\u673a\u7ec8\u7aef\u4fdd\u6301\u76f4\u6d41DC\u5171\u6a21\u7535\u538b\u57280\u52303.6V\u4e4b\u95f4\u3002</li> </ul> <p>\u5b9a\u4e49\u4e86\u4f20\u9012\u57fa\u672c\u590d\u4f4d\u7684\u4e24\u79cd\u65b9\u6cd5\u3002\u9996\u5148\uff0c\u5b83\u53ef\u4ee5\u7528\u4e00\u4e2a\u79f0\u4e3aPERST# \uff08PCI Express Reset\uff09\u7684\u8f85\u52a9\u8fb9\u5e26\u4fe1\u53f7auxiliary side-band signal\u8fdb\u884c\u4fe1\u53f7\u3002 \u5176\u6b21\uff0c\u5f53\u6ca1\u6709\u4e3a\u63d2\u4ef6\u5361\u6216\u7ec4\u4ef6\u63d0\u4f9bPERST#\u65f6\uff0c\u5f53\u7535\u6e90\u5faa\u73af\u65f6\uff0c\u7ec4\u4ef6\u6216\u63d2\u4ef6\u5361\u5c06\u81ea\u52a8\u751f\u6210\u57fa\u672c\u590d\u4f4d\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#perst-fundamental-reset-generation","title":"PERST# Fundamental Reset Generation","text":"<p>PERST# \u57fa\u672c\u590d\u4f4d\u7684\u4ea7\u751f</p> <p>\u4e2d\u592e\u8d44\u6e90\u8bbe\u5907\uff08\u5982PCI Express\u7cfb\u7edf\u4e2d\u7684\u82af\u7247\u7ec4\uff09\u63d0\u4f9b\u8fd9\u79cdreset\u3002\u4f8b\u5982\uff0c\u56fe18\u20101\u4e2d\u7684IO\u63a7\u5236\u5668\u96c6\u7ebf\u5668\uff08ICH\uff09\u82af\u7247\u53ef\u4ee5\u6839\u636e\u7cfb\u7edf\u7535\u6e90\u2018 POWERGOOD \u2019\u4fe1\u53f7\u7684\u72b6\u6001\u751f\u6210PERST#\u4fe1\u53f7\uff0c\u56e0\u4e3a\u8fd9\u8868\u660e\u4e3b\u7535\u6e90\u5df2\u6253\u5f00\u4e14\u7a33\u5b9a\u3002\u5982\u679c\u7535\u6e90\u5173\u95ed\uff0cPOWERGOOD\u5207\u6362\u5e76\u5bfc\u81f4PERST#\u65ad\u8a00\u548c\u53d6\u6d88\u65ad\u8a00\uff0c\u5bfc\u81f4\u51b7\u590d\u4f4d(Cold Reset)\u3002\u7cfb\u7edf\u8fd8\u53ef\u4ee5\u63d0\u4f9b\u4e00\u79cd\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u5207\u6362PERST#\u7684\u65b9\u6cd5\u6765\u5b8c\u6210\u70ed\u91cd\u7f6e(Warm Reset)\u3002</p> <p>PERST#\u4fe1\u53f7\u9988\u9001\u4e3b\u677f\u4e0a\u7684\u6240\u6709PCI Express\u8bbe\u5907\uff0c\u5305\u62ec\u8fde\u63a5\u5668\u548c\u56fe\u5f62\u63a7\u5236\u5668\u3002\u8bbe\u5907\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528PERST#\uff0c\u4f46\u4e0d\u662f\u5fc5\u987b\u8981\u6c42\u8fd9\u6837\u505a\u3002PERST#\u4fe1\u53f7\u4e5f\u9988\u9001\u5982\u56fe\u6240\u793a\u7684PCIe-to-PCI-X\u6865\u3002\u6865\u603b\u662f\u5c06\u4e3b\uff08upstream\uff09\u603b\u7ebf\u4e0a\u7684\u590d\u4f4d\u8f6c\u53d1\u5230\u4ece\uff08downstream\uff09\u603b\u7ebf\u4e0a\uff0c\u56e0\u6b64PCI\u2010X\u603b\u7ebf\u770b\u5230RST#\u65ad\u8a00\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#autonomous-reset-generation","title":"Autonomous Reset Generation","text":"<p>\u81ea\u52a8\u590d\u4f4d\u7684\u4ea7\u751f</p> <p>\u4e00\u4e2a\u8bbe\u5907\u5fc5\u987b\u88ab\u8bbe\u8ba1\u6210\u5728\u4e3b\u7535\u6e90\u5e94\u7528\u65f6\u5728\u786c\u4ef6\u4e2d\u4ea7\u751f\u81ea\u5df1\u7684\u590d\u4f4d\u3002spec\u6ca1\u6709\u8bf4\u660e\u8fd9\u5c06\u5982\u4f55\u5b9e\u73b0\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u81ea\u590d\u4f4d\u673a\u5236(self-reset)\u5185\u7f6e\u5230\u8bbe\u5907\u4e2d\u6216\u4f5c\u4e3a\u5916\u90e8\u903b\u8f91\u6dfb\u52a0\u3002\u4f8b\u5982\uff0c\u68c0\u6d4b\u5230Power-On\u7684\u63d2\u4ef6\u5361\u53ef\u4ee5\u4f7f\u7528\u8be5\u4e8b\u4ef6\u5bf9\u5176\u8bbe\u5907\u4ea7\u751f\u672c\u5730\u590d\u4f4d\u3002\u5982\u679c\u8bbe\u5907\u68c0\u6d4b\u5230\u5176\u529f\u7387(power)\u8d85\u51fa\u6307\u5b9a\u7684\u9650\u5236\uff0c\u5219\u5fc5\u987b\u81ea\u52a8\u590d\u4f4d\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#link-wakeup-from-l2-low-power-state","title":"Link Wakeup from L2 Low Power State","text":"<p>\u94fe\u8def\u4eceL2\u4f4e\u529f\u8017\u72b6\u6001\u5524\u9192</p> <p>\u4f5c\u4e3a\u9700\u8981\u81ea\u4e3b\u590d\u4f4d\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4e00\u4e2a\u8bbe\u5907\u7684\u4e3b\u7535\u6e90\u4f5c\u4e3a\u7535\u6e90\u7ba1\u7406\u7b56\u7565\u7684\u4e00\u90e8\u5206\u88ab\u5173\u95ed\uff0c\u5982\u679c\u5b83\u88ab\u8bbe\u8ba1\u4e3a\u53d1\u51fa\u5524\u9192\u4fe1\u53f7\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u80fd\u591f\u8bf7\u6c42\u6062\u590d\u5230\u5168\u529f\u7387\u3002\u8bbe\u5907\u6062\u590d\u4f9b\u7535\u540e\uff0c\u5fc5\u987b\u8fdb\u884c\u590d\u4f4d\u3002\u7cfb\u7edf\u7684\u7535\u6e90\u63a7\u5236\u5668\u53ef\u4ee5\u5c06PERST#\u5f15\u811a\u65ad\u8a00\u5230\u8bbe\u5907\u4e0a\uff0c\u5982\u56fe18 - 1\u6240\u793a\uff0c\u4f46\u662f\u5982\u679c\u5b83\u4e0d\u8fd9\u6837\u505a\uff0c\u6216\u8005\u5982\u679c\u8bbe\u5907\u4e0d\u652f\u6301PERST#\uff0c\u5f53\u8bbe\u5907\u68c0\u6d4b\u5230\u4e3b\u7535\u6e90\u91cd\u65b0\u5e94\u7528\u65f6\uff0c\u5b83\u5fc5\u987b\u81ea\u52a8\u4ea7\u751f\u81ea\u5df1\u7684\u57fa\u672c\u590d\u4f4d</p> <p></p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#hot-reset-in-band-reset","title":"Hot Reset (In-band Reset)","text":"<p>\u70ed\u590d\u4f4d\uff08\u5e26\u5185\u590d\u4f4d\uff09</p> <p>\u901a\u8fc7\u53d1\u9001\u51e0\u4e2aTS1\uff08\u5176\u5185\u5bb9\u5982\u56fe18\u20102\u6240\u793a\uff09\uff0c\u4f7f\u7528symbol 5\u7684bit 0\u65ad\u8a00\uff0c\u70ed\u590d\u4f4d\u5728\u9891\u5e26\u5185\u4ece\u4e00\u4e2a\u94fe\u8def\u90bb\u5c45\u4f20\u64ad\u5230\u53e6\u4e00\u4e2a\u94fe\u8def\u90bb\u5c45\u3002\u8fd9\u4e9bts1\u5728\u6240\u6709Lane\u4e0a\u53d1\u9001\uff0c\u4f7f\u7528\u5148\u524d\u534f\u5546\u7684Link\u548cLane\u53f7\uff0c\u65f6\u95f4\u4e3a2\u6beb\u79d2\u3002\u4e00\u65e6\u88ab\u53d1\u9001\uff0c\u70ed\u590d\u4f4d\u7684\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u90fd\u5c06\u5728 Detect LTSSM\u72b6\u6001\u7ed3\u675f\uff08\u53c2\u89c1\u7b2c612\u9875\u7684\u201c\u70ed\u590d\u4f4d\u72b6\u6001\u201d\uff09\u3002</p> <p></p> <p>\u70ed\u590d\u4f4d\u662f\u901a\u8fc7\u5728\u6865\u7684\u6865\u63a7\u914d\u7f6e\u5bc4\u5b58\u5668\u4e2d\u8bbe\u7f6e\u4e8c\u6b21\u603b\u7ebf\u590d\u4f4d\u4f4d(Secondary Bus Reset bit in a bridge\u2019s Bridge Control configuration register)\u5728\u8f6f\u4ef6\u4e2d\u542f\u52a8\u7684\uff0c\u5982\u56fe18\u20105\u6240\u793a\u3002\u56e0\u6b64\uff0c\u53ea\u6709\u5305\u542b\u6865\u7684\u8bbe\u5907\uff0c\u5982Root Complex\u6216Switch\uff0c\u624d\u80fd\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u5728\u5176\u4e0a\u884c\u7aef\u53e3(Upstream Port)\u63a5\u6536\u5230\u70ed\u590d\u4f4d\u7684switch\u5fc5\u987b\u5c06\u5176\u5e7f\u64ad\u5230\u6240\u6709\u7684\u4e0b\u884c\u7aef\u53e3(Downstream Ports)\u5e76\u8fdb\u884c\u81ea\u8eab\u590d\u4f4d\u3002\u63a5\u6536\u70ed\u590d\u4f4d\u7684switch\u4e0b\u6e38\u6240\u6709\u8bbe\u5907\u5c06\u81ea\u884c\u590d\u4f4d\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#response-to-receiving-hot-reset","title":"Response to Receiving Hot Reset","text":"<p>\u63a5\u6536\u70ed\u590d\u4f4d\u54cd\u5e94</p> <ul> <li>\u8bbe\u5907\u7684LTSSM\u7ecf\u5386Recovery \u548cHot Reset state\uff0c\u7136\u540e\u56de\u5230Detect state\uff0c\u5728Detect state\u5f00\u59cb\u94fe\u8def\u8bad\u7ec3\u8fc7\u7a0b\u3002</li> <li>\u6240\u6709\u8bbe\u5907\u7684\u72b6\u6001\u673a\uff0c\u786c\u4ef6\u903b\u8f91\uff0c\u7aef\u53e3\u72b6\u6001\u548c\u914d\u7f6e\u5bc4\u5b58\u5668\uff08\u9664\u4e86\u7c98\u6027\u5bc4\u5b58\u5668[sticky registers]\uff09\u521d\u59cb\u5316\u4e3a\u9ed8\u8ba4\u6761\u4ef6\u3002</li> </ul>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#switches-generate-hot-reset-on-downstream-ports","title":"Switches Generate Hot Reset on Downstream Ports","text":"<p>\u4ea4\u6362\u673a(switch)\u7684\u4e0b\u884c\u7aef\u53e3\u751f\u6210\u70ed\u590d\u4f4d</p> <p>\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0c\u4ea4\u6362\u673a\u5728\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u4e0a\u4ea7\u751f\u70ed\u590d\u4f4d\uff1a</p> <ul> <li>switch\u7684\u4e0a\u884c\u7aef\u53e3\u6536\u5230\u70ed\u590d\u4f4d\u3002</li> <li>\u5bf9\u4e8eswitch\u6216\u7f51\u6865(bridge)\u7684\u4e0a\u884c\u7aef\u53e3\uff0c\u5982\u679c\u6570\u636e\u94fe\u8def\u5c42\u62a5\u544aDL_Down state\uff0c\u5176\u6548\u679c\u4e0e\u70ed\u590d\u4f4d\u975e\u5e38\u76f8\u4f3c\u3002\u5f53\u4e0a\u6e38\u7aef\u53e3\u7531\u4e8e\u9519\u8bef\u800c\u65e0\u6cd5\u901a\u8fc7\u7269\u7406\u5c42\u6216\u6570\u636e\u94fe\u8def\u5c42\u6062\u590d\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4e0e\u4e0a\u6e38\u8bbe\u5907\u5931\u53bb\u8fde\u63a5\u7684\u60c5\u51b5\u3002</li> <li>\u8f6f\u4ef6\u8bbe\u7f6e\u4e0e\u4e0a\u6e38\u7aef\u53e3\u76f8\u5173\u7684\u6865\u63a7\u5236\u914d\u7f6e\u5bc4\u5b58\u5668\u7684\u201cSecondary Bus Reset\u201d\u4f4d\uff0c\u5982\u56fe18 - 3\u6240\u793a</li> </ul> <p></p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#bridges-forward-hot-reset-to-the-secondary-bus","title":"Bridges Forward Hot Reset to the Secondary Bus","text":"<p>\u5982\u679c\u4e00\u4e2a\u6865\uff0c\u5982PCI Express-to-PCI\uff08\u2010X\uff09\u6865\u68c0\u6d4b\u5230\u5176\u4e0a\u6e38\u7aef\u53e3\u4e0a\u7684\u70ed\u590d\u4f4d\uff0c\u5b83\u5fc5\u987b\u5728\u5176secondry PCI\uff08\u2010X\uff09\u603b\u7ebf\u4e0a\u65ad\u8a00PRST#\u4fe1\u53f7\uff0c\u5982\u56fe18\u20104\u6240\u793a\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#software-generation-of-hot-reset","title":"Software Generation of Hot Reset","text":"<p>\u8f6f\u4ef6\u901a\u8fc7\u5728\u8be5\u5173\u8054\u7aef\u53e3\u914d\u7f6e\u5934\u7684\u6865\u63a7\u5236\u5bc4\u5b58\u5668\u4e2d\u7684\u201cSecondary Bus Reset\u201c\u4f4d\u51991\u540e0\uff0c\u5728\u7279\u5b9a\u7aef\u53e3\u4e0a\u751f\u6210\u70ed\u590d\u4f4d(\u53c2\u89c1840\u9875\u7684\u56fe18\u20105)\u3002</p> <p>\u8003\u8651838\u9875\u56fe18\u20103\u6240\u793a\u7684\u4f8b\u5b50\u3002\u8f6f\u4ef6\u8bbe\u7f6eswitch A\u7684\u5de6\u4e0b\u6e38\u7aef\u53e3\u7684\u201cSecondary Bus Reset\u201c\u5bc4\u5b58\u5668\uff0c\u4f7f\u5176\u53d1\u9001\u5e26\u6709\u70ed\u590d\u4f4d\u4f4d\u8bbe\u7f6e\u7684TS1\u6709\u5e8f\u96c6\u3002switch B\u5728\u5176\u4e0a\u884c\u7aef\u53e3\u63a5\u6536\u5230\u6b64Hot Reset\uff0c\u5e76\u5c06\u5176\u8f6c\u53d1\u7ed9\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u3002</p> <p></p> <p>\u5982\u679c\u8f6f\u4ef6\u8bbe\u7f6e\u4e86switch\u4e0a\u884c\u7aef\u53e3\u7684\"Secondary Bus Reset\"\u4f4d\uff0c\u5219switch\u4f1a\u5728\u5176\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u4e0a\u4ea7\u751f\u70ed\u590d\u4f4d\uff0c\u5982\u56fe18 - 4\u6240\u793a\u3002\u5728\u8fd9\u91cc\uff0c\u8f6f\u4ef6\u5728switch C\u7684\u4e0a\u884c\u7aef\u53e3\u8bbe\u7f6e\"Secondary Bus Reset\"\u4f4d\uff0c\u4f7f\u5176\u5728\u6240\u6709\u4e0b\u884c\u7aef\u53e3\u4e0a\u53d1\u9001\u5e26\u6709\u70ed\u590d\u4f4d\u4f4d\u7684TS1\u3002PCIe-to-PCI\u6865\u63a5\u6536\u6b64\u70ed\u590d\u4f4d\uff0c\u5e76\u901a\u8fc7\u65ad\u8a00PRST#\u5c06\u5176\u8f6c\u79fb\u5230PCI\u603b\u7ebf\u4e0a\u3002</p> <p>\u8bbe\u7f6e\"Secondary Bus Reset\"\u4f4d\u5bfc\u81f4\u7aef\u53e3\u7684LTSSM\u8f6c\u6362\u5230Recovery\u72b6\u6001\uff08\u6709\u5173LTSSM\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u7b2c519\u9875\u7684\u201cLTSSM\u72b6\u6001\u6982\u8ff0\u201d\uff09\uff0c\u5728\u90a3\u91cc\u5b83\u751f\u6210\u5177\u6709Hot reset\u4f4d\u96c6\u7684TS1\u3002TS1\u8fde\u7eed\u4ea7\u751f2ms\uff0c\u7136\u540e\u7aef\u53e3\u9000\u51fa\u5230Detect\u72b6\u6001\uff0c\u51c6\u5907\u5f00\u59cbLink\u8bad\u7ec3\u8fc7\u7a0b</p> <p>Hot reset TS1\u7684\u63a5\u6536\u7aef\uff08\u603b\u662f\u4e0b\u6e38\uff09\u4e5f\u4f1a\u8fdb\u5165Recovery\u72b6\u6001\u3002\u5f53\u5b83\u770b\u5230\u4e24\u4e2a\u8fde\u7eed\u7684TS1\u8bbe\u7f6e\u4e86Hot Reset\u4f4d\u65f6\uff0c\u5b83\u5c06\u8fdb\u5165Hot Reset\u72b6\u6001\uff0c\u8d85\u65f62ms\uff0c\u7136\u540e\u9000\u51fa\u5230Detect\u3002\u4e0a\u6e38\u548c\u4e0b\u6e38\u7aef\u53e3\u90fd\u88ab\u521d\u59cb\u5316\uff0c\u6700\u7ec8\u5904\u4e8e\u68c0\u6d4b\u72b6\u6001\uff0c\u51c6\u5907\u5f00\u59cb\u94fe\u8def\u8bad\u7ec3\u3002\u5982\u679c\u4e0b\u6e38\u8bbe\u5907\u4e5f\u662f\u4ea4\u6362\u673a\u6216\u7f51\u6865\uff0c\u5b83\u4e5f\u4f1a\u5411\u5176\u4e0b\u6e38\u7aef\u53e3\u8fdb\u884c\u70ed\u590d\u4f4d\uff0c\u5982\u56fe18 - 3\u6240\u793a\u3002</p> <p></p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#software-can-disable-the-link","title":"Software Can Disable the Link","text":"<p>\u8f6f\u4ef6\u53ef\u4ee5\u7981\u7528\u94fe\u8def</p> <p>\u8f6f\u4ef6\u4e5f\u53ef\u4ee5\u7981\u7528\u4e00\u4e2aLink\uff0c\u8feb\u4f7f\u5b83\u8fdb\u5165\u7535\u5b50\u7a7a\u95f2\u72b6\u6001(Electrical Idle)\uff0c\u5e76\u4fdd\u6301\u5728\u90a3\u91cc\uff0c\u76f4\u5230\u8fdb\u4e00\u6b65\u901a\u77e5\u3002\u5728\u8fd9\u4e00\u70b9\u4e0a\u63d0\u5230\u7684\u539f\u56e0\u662f\uff0c\u7981\u7528Link\u4e5f\u4f1a\u5bf9\u4e0b\u6e38\u7ec4\u4ef6\u9020\u6210\u70ed\u590d\u4f4d(hot reset)\u7684\u5f71\u54cd\u3002\u901a\u8fc7\u5728\u4e0b\u884c\u7aef\u53e3\u7684\u94fe\u8def\u63a7\u5236\u5bc4\u5b58\u5668(Link Control Register)\u4e2d\u8bbe\u7f6e\u94fe\u8def\u7981\u7528\u4f4d\u6765\u5b9e\u73b0\u7981\u7528\uff0c\u5982\u56fe18\u20106\u6240\u793a\u3002\u8fd9\u5c06\u5bfc\u81f4\u7aef\u53e3\u8fdb\u5165Recovery LTSSM\u72b6\u6001\uff0c\u5e76\u5f00\u59cb\u53d1\u9001\u8bbe\u7f6e\u4e86\u7981\u7528\u4f4d\u7684TS1\u3002\u7531\u4e8e\u8fd9\u53ea\u80fd\u5728\u94fe\u8def\u88ab\u7981\u7528\u7684\u60c5\u51b5\u4e0b\u5bf9\u4e0b\u884c\u7aef\u53e3\u8fdb\u884c\u63a7\u5236\uff0c\u56e0\u6b64\u8be5\u4f4d\u4fdd\u7559\u7ed9\u4e0a\u884c\u7aef\u53e3\uff08\u5982\u7aef\u70b9\u6216\u4ea4\u6362\u673a\u4e0a\u884c\u7aef\u53e3\uff09\u3002</p> <p></p> <p>\u5f53\u4e0a\u884c\u7aef\u53e3\u8bc6\u522b\u5230\u6709\u7981\u7528\u4f4d\u7684TS1\u65f6\uff0c\u5b83\u7684\u7269\u7406\u5c42\u5411\u94fe\u8def\u5c42\u53d1\u9001LinkUp=0 \uff08false\uff09\u4fe1\u53f7\uff0c\u6240\u6709\u7684lane\u8fdb\u5165\u7535\u7a7a\u95f2\u72b6\u6001\u3002\u5728\u8d85\u65f62ms\u540e\uff0c\u4e0a\u6e38\u7aef\u53e3\u5c06\u8fdb\u5165Detect\u72b6\u6001\uff0c\u4f46\u4e0b\u6e38\u7aef\u53e3\u5c06\u4fdd\u6301\u5728Disabled LTSSM\u72b6\u6001\uff0c\u76f4\u5230\u88ab\u6307\u793a\u9000\u51fa\u5b83\uff08\u4f8b\u5982\u901a\u8fc7\u6e05\u9664Link Disable\u4f4d\uff09\uff0c\u56e0\u6b64\u94fe\u8def\u5c06\u4fdd\u6301\u7981\u7528\u72b6\u6001\uff0c\u5e76\u4e14\u5728\u6b64\u4e4b\u524d\u4e0d\u4f1a\u5c1d\u8bd5\u8bad\u7ec3\u3002</p> <p></p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#function-level-reset-flr","title":"Function Level Reset (FLR)","text":"<p>\u529f\u80fd\u7ea7\u590d\u4f4d</p> <p>FLR \u80fd\u529b\u5141\u8bb8\u8f6f\u4ef6\u5728\u4e00\u4e2a\u591afuntion\u8bbe\u5907\u4e2d\u91cd\u7f6e\u4e00\u4e2afunction\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u5b83\u4eec\u6240\u6709\u4eba\u5171\u4eab\u7684Link\u3002\u5b83\u7684\u5b9e\u73b0\u662f\u5f3a\u70c8\u63a8\u8350\u7684\uff0c\u4f46\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u6240\u4ee5\u8f6f\u4ef6\u5728\u5c1d\u8bd5\u4f7f\u7528\u5b83\u4e4b\u524d\u9700\u8981\u901a\u8fc7\u68c0\u67e5Device Capabilities Register\u6765\u786e\u8ba4\u5b83\u7684\u53ef\u7528\u6027\uff0c\u5982\u56fe18 - 8\u6240\u793a\u3002\u5982\u679c\u8bbe\u7f6e\u4e86Function-Level Reset Capability\u4f4d\uff0c\u5219\u53ea\u9700\u5728Device Control Register\u4e2d\u8bbe\u7f6eIni-tiate Function-Level Reset\u4f4d\u5373\u53ef\u542f\u52a8FLR\uff0c\u5982\u56fe18 - 9\u6240\u793a\u3002</p> <p></p> <p></p> <p>\u8be5spec\u63d0\u5230\u4e86\u51e0\u4e2a\u4f8b\u5b50\uff0c\u9f13\u52b1\u6dfb\u52a0FLR\uff1a</p> <ol> <li>\u63a7\u5236Function\u7684\u8f6f\u4ef6\u53ef\u80fd\u4f1a\u9047\u5230\u95ee\u9898\uff0c\u4e0d\u518d\u6b63\u5e38\u8fd0\u884c\u3002\u9632\u6b62\u6570\u636e\u635f\u574f\u9700\u8981\u91cd\u7f6e\u8be5\u529f\u80fd\uff0c\u4f46\u5982\u679c\u8be5\u8bbe\u5907\u5185\u7684\u5176\u4ed6\u529f\u80fd\u4ecd\u7136\u6b63\u5e38\u5de5\u4f5c\uff0c\u5219\u6700\u597d\u80fd\u591f\u91cd\u7f6e\u6709\u95ee\u9898\u7684Function\u3002</li> <li>\u5728\u865a\u62df\u5316\u73af\u5883\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4ece\u4e00\u4e2a\u786c\u4ef6\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u786c\u4ef6\uff0c\u56e0\u6b64\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u4ece\u4e00\u4e2aFunction\u79fb\u51fa\u65f6\uff0c\u52a1\u5fc5\u786e\u4fdd\u8be5Function\u4e0d\u4fdd\u7559\u6709\u5173\u5176\u6b63\u5728\u6267\u884c\u7684\u64cd\u4f5c\u7684\u4efb\u4f55\u4fe1\u606f\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u53ef\u80fd\u88ab\u89c6\u4e3a\u673a\u5bc6\u7684\u4fe1\u606f\u5bf9\u8fd0\u884c\u5728\u8be5\u51fd\u6570\u4e0a\u7684\u65b0\u5e94\u7528\u7a0b\u5e8f\u53ef\u89c1\u3002\u8fc1\u79fb\u4e4b\u524d\u7684\u5e94\u7528\u7a0b\u5e8f\u540e\u8fdb\u884c\u6e05\u7406\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u5c31\u662f\u91cd\u7f6eFunction\u3002</li> <li>\u5f53\u8f6f\u4ef6\u4e3aFunction\u91cd\u65b0\u6784\u5efa\u8f6f\u4ef6\u5806\u6808\u65f6\uff0c\u6709\u65f6\u9700\u8981\u9996\u5148\u5c06Function\u7f6e\u4e8e\u672a\u521d\u59cb\u5316\u72b6\u6001\u3002\u548c\u524d\u9762\u4e00\u6837\uff0c\u907f\u514d\u91cd\u7f6e\u5171\u4eabLink\u7684\u6240\u6709Function\u662f\u53ef\u53d6\u7684\u3002</li> </ol> <p>\u53e6\u4e00\u4e2a\u7279\u70b9\u6ca1\u6709\u51fa\u73b0\u5728spec\u7684\u6848\u4f8b\u5217\u8868\u4e2d\uff0c\u4f46\u5b83\u672c\u8eab\u4ecd\u7136\u662f\u4e00\u4e2a\u6fc0\u52b1\u56e0\u7d20\u3002\u867d\u7136\u4f20\u7edf\u7684\u91cd\u7f6e(convention reset)\u5c06\u91cd\u65b0\u521d\u59cb\u5316\u8bbe\u5907\u5185\u7684\u6240\u6709\u4e1c\u897f\uff0c\u4f46\u5b83\u5e76\u4e0d\u8981\u6c42\u6240\u6709\u5916\u90e8\u6d3b\u52a8\uff0c\u4f8b\u5982\u7f51\u7edc\u63a5\u53e3\u4e0a\u7684\u6d41\u91cf\uff0c\u5fc5\u987b\u7acb\u5373\u505c\u6b62\u3002FLR\u6dfb\u52a0\u4e86\u8fd9\u4e2a\u8981\u6c42\uff0c\u5e76\u4e14\u662f\u552f\u4e00\u7684\u91cd\u7f6e\u3002</p> <p>FLR\u91cd\u7f6eFunction\u7684\u5185\u90e8\u72b6\u6001\u548c\u5bc4\u5b58\u5668\uff0c\u4f7f\u5176\u9759\u9ed8\uff0c\u4f46\u4e0d\u5f71\u54cd\u4efb\u4f55\u7c98\u6027\u4f4d(sticky bits)\uff0c\u6216\u786c\u4ef6\u521d\u59cb\u5316\u4f4d\uff0c\u6216Link\u4e0a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\uff0c\u5982\u6355\u83b7\u7535\u6e90\uff0cASPM\u63a7\u5236\uff0cMax_Payload_Size\u6216\u865a\u62df\u901a\u9053\u5bc4\u5b58\u5668\u3002\u5982\u679c\u53d1\u9001\u4e86\u672a\u5b8c\u6210\u7684Assert INTx\u4e2d\u65ad\u6d88\u606f\uff0c\u5219\u5fc5\u987b\u53d1\u9001\u76f8\u5e94\u7684Deassert INTx\u6d88\u606f\uff0c\u9664\u975e\u8be5\u4e2d\u65ad\u88ab\u5185\u90e8\u53e6\u4e00\u4e2a\u4ecd\u7136\u65ad\u8a00\u5b83\u7684Function\u5171\u4eab\u3002\u5f53\u6536\u5230FLR\u65f6\uff0c\u8be5Function\u7684\u6240\u6709\u5916\u90e8\u6d3b\u52a8\u90fd\u5fc5\u987b\u505c\u6b62\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#time-allowed","title":"Time Allowed","text":"<p>\u65f6\u95f4\u5141\u8bb8\u7684</p> <p>Function\u5fc5\u987b\u5728100ms\u5185\u5b8c\u6210FLR\u3002\u7136\u800c\uff0c\u5982\u679c\u6709\u4efb\u4f55\u5c1a\u672a\u8fd4\u56de\u7684\u5206\u5272\u5b8c\u6210\uff0c\u8f6f\u4ef6\u53ef\u80fd\u9700\u8981\u5ef6\u8fdf\u542f\u52a8FLR\uff08\u7531Device Status Register\u4e2d\u8bbe\u7f6eTransactions Pending\u4f4d\u8868\u793a\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8f6f\u4ef6\u5fc5\u987b\u5728\u521d\u59cb\u5316FLR\u4e4b\u524d\u7b49\u5f85\u5b83\u4eec\u5b8c\u6210\uff0c\u6216\u8005\u5728FLR\u4e4b\u540e\u7b49\u5f85100ms\u624d\u80fd\u5c1d\u8bd5\u91cd\u65b0\u521d\u59cb\u5316Function\u3002\u5982\u679c\u4e0d\u80fd\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u5c31\u4f1a\u51fa\u73b0\u6f5c\u5728\u7684\u6570\u636e\u635f\u574f\u95ee\u9898\uff1aFunction\u53ef\u80fd\u62c6\u5206\u4e86\u672a\u5b8c\u6210\u7684\u4e8b\u52a1\uff0c\u4f46\u91cd\u7f6e\u4f1a\u5bfc\u81f4\u5b83\u5931\u53bb\u5bf9\u5b83\u4eec\u7684\u8ddf\u8e2a\u3002\u5982\u679c\u4ed6\u4eec\u7a0d\u540e\u8fd4\u56de\uff0c\u4ed6\u4eec\u53ef\u80fd\u8bef\u4ee5\u4e3a\u662f\u5bf9\u81eaFLR\u4ee5\u6765\u53d1\u51fa\u7684\u65b0\u8bf7\u6c42\u7684\u54cd\u5e94\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0cspec\u5efa\u8bae\u8f6f\u4ef6\u5e94\u8be5\uff1a</p> <ol> <li>\u4e0e\u5176\u4ed6\u53ef\u80fd\u8bbf\u95ee\u8be5Function\u7684\u8f6f\u4ef6\u534f\u8c03\uff0c\u4ee5\u786e\u4fdd\u5b83\u5728FLR\u671f\u95f4\u4e0d\u4f1a\u5c1d\u8bd5\u8bbf\u95ee\u3002</li> <li>\u6e05\u9664\u6574\u4e2a\u547d\u4ee4\u5bc4\u5b58\u5668(Command Register)\uff0c\u4ece\u800c\u6682\u505cFunction\u3002</li> <li>\u901a\u8fc7\u8f6e\u8be2Device Status Register\u4e2d\u7684\u4e8b\u52a1\u7b49\u5f85\u4f4d(Transactions Pending bit)\uff0c\u786e\u4fdd\u5148\u524d\u8bf7\u6c42\u7684\u5b8c\u6210\u5df2\u8fd4\u56de\uff0c\u76f4\u5230\u5b83\u88ab\u6e05\u9664\u6216\u7b49\u5f85\u8db3\u591f\u957f\u7684\u65f6\u95f4\u4ee5\u786e\u4fdd\u5b8c\u6210\u4e0d\u4f1a\u88ab\u8fd4\u56de\u3002\u591a\u957f\u65f6\u95f4\u624d\u591f\u957f\uff1f\u5982\u679c\u4f7f\u7528\u4e86\u201c\u5b8c\u6210\u8d85\u65f6\u201d\uff0c\u8bf7\u7b49\u5f85\u8d85\u65f6\u65f6\u95f4\u540e\u518d\u53d1\u9001FLR\u3002\u5982\u679c\u5b8c\u6210\u8d85\u65f6\u88ab\u7981\u7528\uff0c\u90a3\u4e48\u7b49\u5f85\u81f3\u5c11100ms\u3002</li> <li>\u542f\u52a8FLR\u548c\u7b49\u5f85100ms\u3002</li> <li>\u8bbe\u7f6eFunction\u7684\u914d\u7f6e\u5bc4\u5b58\u5668\u5e76\u4f7f\u5176\u6b63\u5e38\u8fd0\u884c\u3002</li> </ol> <p>\u5f53FLR\u5b8c\u6210\u65f6\uff0c\u4e0d\u7ba1\u65f6\u95f4\u5982\u4f55\uff0cTransaction Pending\u4f4d\u5fc5\u987b\u88ab\u6e05\u9664\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#behavior-during-flr","title":"Behavior During FLR","text":"<p>FLR\u671f\u95f4\u7684\u884c\u4e3a</p> <p>spec\u7f16\u5199\u8005\u9009\u62e9\u7528\u76f8\u5f53\u5bbd\u6cdb\u7684\u672f\u8bed\u6765\u63cf\u8ff0Function reset\u7684\u884c\u4e3a\uff0c\u4ee5\u4fbf\u4e0d\u6392\u9664\u8bbe\u8ba1\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u91c7\u53d6\u7684\u4efb\u4f55\u5185\u90e8\u6b65\u9aa4\u3002\u89c4\u8303\u4e2d\u5217\u51fa\u4e86\u4ee5\u4e0b\u884c\u4e3a\uff1a</p> <ul> <li>\u8be5Function\u4e0d\u80fd\u5728\u5916\u90e8\u63a5\u53e3\u4e0a\u663e\u793a\u4e3a\u5177\u6709\u6d3b\u52a8\u4e3b\u673a\u7684\u521d\u59cb\u5316\u9002\u914d\u5668(adapter)\u3002\u786e\u4fdd\u7ec8\u6b62\u5916\u90e8\u63a5\u53e3\u4e0a\u7684\u6240\u6709\u6d3b\u52a8\u7684\u6b65\u9aa4\u5c06\u662f\u7279\u5b9a\u4e8e\u8bbe\u8ba1\u7684\u3002\u4f8b\u5982\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u7f51\u7edc\u9002\u914d\u5668\u5fc5\u987b\u4e0d\u54cd\u5e94\u9700\u8981\u6d3b\u52a8\u4e3b\u673a\u7684\u8bf7\u6c42\u3002</li> <li>\u8be5Function\u4e0d\u80fd\u4fdd\u7559\u4efb\u4f55\u8f6f\u4ef6\u53ef\u8bfb\u7684\u72b6\u6001\uff0c\u8fd9\u4e9b\u72b6\u6001\u53ef\u80fd\u5305\u542b\u4ee5\u524d\u4f7f\u7528\u51fd\u6570\u65f6\u7559\u4e0b\u7684\u79d8\u5bc6\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u5fc5\u987b\u6e05\u9664\u6216\u968f\u673a\u5316\u4efb\u4f55\u5185\u90e8\u5185\u5b58\u3002</li> <li>\u8be5Function\u5fc5\u987b\u7531\u4e0b\u4e00\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u6b63\u5e38\u914d\u7f6e\u3002</li> <li>\u8be5Function\u5fc5\u987b\u8fd4\u56de\u5bfc\u81f4FLR\u7684\u914d\u7f6e\u5199\u5165\u7684\u5b8c\u6210\uff0c\u7136\u540e\u542f\u52a8FLR\u3002</li> </ul> <p>\u5f53FLR\u6b63\u5728\u8fdb\u884c\u65f6\uff1a</p> <ul> <li>\u4efb\u4f55\u5230\u8fbe\u7684\u8bf7\u6c42\u90fd\u5141\u8bb8\u88ab\u9759\u9ed8\u5730\u4e22\u5f03\uff0c\u800c\u4e0d\u8bb0\u5f55\u5b83\u4eec\u6216\u53d1\u51fa\u9519\u8bef\u4fe1\u53f7\u3002\u4f46\u662f\uff0c\u5fc5\u987b\u66f4\u65b0\u6d41\u91cf\u63a7\u5236\u79ef\u5206\u4ee5\u7ef4\u6301link\u64cd\u4f5c\u3002</li> <li>\u4f20\u5165\u7684\u5b8c\u6210(completions)\u53ef\u4ee5\u88ab\u89c6\u4e3a\u610f\u5916\u5b8c\u6210(Unexpected Completions)\uff0c\u6216\u8005\u5728\u4e0d\u8bb0\u5f55\u5b83\u4eec\u6216\u53d1\u51fa\u9519\u8bef\u4fe1\u53f7\u7684\u60c5\u51b5\u4e0b\u88ab\u9759\u9ed8\u4e22\u5f03\u3002</li> <li>FLR\u672c\u8eab\u5fc5\u987b\u5728\u4e0a\u8ff0\u65f6\u95f4\u5185\u5b8c\u6210\uff0c\u4f46\u4e4b\u540e\u7684\u521d\u59cb\u5316\u53ef\u80fd\u9700\u8981\u66f4\u957f\u7684\u65f6\u95f4\u3002\u5982\u679c\u4e00\u4e2a\u914d\u7f6e\u8bf7\u6c42(Configuration Request)\u5728\u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u524d\u8fdb\u5165\uff0cFunction\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709CRS \uff08configuration Retry Status\uff09\u72b6\u6001\u7684completion\u3002\u4e00\u65e6\u8fd4\u56de\u5e26\u6709\u4efb\u4f55\u5176\u4ed6\u72b6\u6001\u7684completion\uff0c\u5728\u51fd\u6570\u518d\u6b21\u91cd\u7f6e\u4e4b\u524d\uff0cCRS\u72b6\u6001\u5c06\u4e0d\u518d\u662f\u5408\u6cd5\u7684\u3002</li> </ul>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#reset-exit","title":"Reset Exit","text":"<p>\u91cd\u7f6e\u9000\u51fa</p> <p>\u9000\u51fareset state\u540e\uff0c\u94fe\u8def\u8bad\u7ec3\u548c\u521d\u59cb\u5316\u5fc5\u987b\u572820ms\u5185\u5f00\u59cb\u3002\u8bbe\u5907\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u9000\u51fa\u590d\u4f4d\u72b6\u6001\uff0c\u56e0\u4e3a\u590d\u4f4d\u4fe1\u53f7\u662f\u5f02\u6b65\u7684\uff0c\u4f46\u5fc5\u987b\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u5f00\u59cb\u8bad\u7ec3\u3002</p> <p>\u4e3a\u4e86\u5141\u8bb8\u590d\u4f4d\u7ec4\u4ef6\u6267\u884c\u5185\u90e8\u521d\u59cb\u5316\uff0c\u7cfb\u7edf\u8f6f\u4ef6\u5fc5\u987b\u5728\u590d\u4f4d\u7ed3\u675f\u540e\u7b49\u5f85\u81f3\u5c11100\u6beb\u79d2\uff0c\u7136\u540e\u624d\u80fd\u5c1d\u8bd5\u5411\u5b83\u4eec\u53d1\u9001\u914d\u7f6e\u8bf7\u6c42(Configuration Request)\u3002\u5982\u679c\u8f6f\u4ef6\u5728100\u6beb\u79d2\u7684\u7b49\u5f85\u65f6\u95f4\u540e\u5411\u8bbe\u5907\u53d1\u8d77\u914d\u7f6e\u8bf7\u6c42\uff0c\u4f46\u8bbe\u5907\u4ecd\u672a\u5b8c\u6210\u5176\u81ea\u6211\u521d\u59cb\u5316\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709\u72b6\u6001CRS\u7684Completion\u3002\u7531\u4e8e\u914d\u7f6e\u8bf7\u6c42\u53ea\u80fd\u7531CPU\u53d1\u8d77\uff0c\u56e0\u6b64Completion\u5c06\u8fd4\u56de\u5230\u6839\u590d\u5408\u4f53(Root Complex)\u3002\u4f5c\u4e3a\u54cd\u5e94\uff0c\u6839\u7528\u6237(Root)\u53ef\u80fd\u4f1a\u81ea\u52a8\u91cd\u65b0\u53d1\u51fa\u914d\u7f6e\u8bf7\u6c42\uff0c\u6216\u8005\u4f7f\u6545\u969c\u5bf9\u8f6f\u4ef6\u53ef\u89c1\u3002\u8be5\u89c4\u8303\u8fd8\u6307\u51fa\uff0c\u5982\u679c\u542f\u7528\u4e86CRS\u8f6f\u4ef6\u53ef\u89c1\u6027\uff0c\u5219\u8f6f\u4ef6\u5e94\u8be5\u53ea\u4f7f\u7528100ms\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u957f\u65f6\u95f4\u8d85\u65f6\u6216\u5904\u7406\u5668\u505c\u6ede\u3002</p> <p>\u8bbe\u5907\u5728\u590d\u4f4d\u540e\u88ab\u5141\u8bb8\u6709\u6574\u65741.0\u79d2\uff08\u20100%/+50%\uff09\u7684\u65f6\u95f4\uff0c\u7136\u540e\u5b83\u4eec\u5fc5\u987b\u5bf9\u914d\u7f6e\u8bf7\u6c42\u505a\u51fa\u9002\u5f53\u7684\u54cd\u5e94\u3002\u56e0\u6b64\uff0c\u7cfb\u7edf\u5fc5\u987b\u5c0f\u5fc3\u5730\u7b49\u5f85\u90a3\u4e48\u957f\u65f6\u95f4\uff0c\u7136\u540e\u624d\u80fd\u786e\u5b9a\u4e00\u4e2a\u65e0\u54cd\u5e94\u7684\u8bbe\u5907\u574f\u4e86\u3002\u8fd9\u4e2a\u503c\u662f\u4ecePCI\u7ee7\u627f\u6765\u7684\uff0c\u9020\u6210\u8fd9\u79cd\u957f\u65f6\u95f4\u5ef6\u8fdf\u7684\u539f\u56e0\u53ef\u80fd\u662f\u4e00\u4e9b\u8bbe\u5907\u5c06\u914d\u7f6e\u7a7a\u95f4\u5b9e\u73b0\u4e3a\u672c\u5730\u5185\u5b58\uff0c\u5fc5\u987b\u5728\u914d\u7f6e\u8f6f\u4ef6\u6b63\u786e\u770b\u5230\u5b83\u4e4b\u524d\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <p>\u5b83\u7684\u521d\u59cb\u5316\u53ef\u80fd\u6d89\u53ca\u4ece\u6162\u901f\u4e32\u884cEEPROM\u590d\u5236\u5fc5\u8981\u7684\u4fe1\u606f\uff0c\u56e0\u6b64\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u3002</p>"},{"location":"pcie3.0_mindshare/18_SystemReset%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%BD%8D/#_5","title":"\u76f8\u5173\u94fe\u63a5","text":""}]}